(this["webpackJsonprdf-document-editor"]=this["webpackJsonprdf-document-editor"]||[]).push([[0],{138:function(e,t,n){"use strict";var r=n(3),a=n(4),i=n(0),o=n.n(i),c=n(237),s=n(1);n(61)("rde:entity:property");t.a=function(e){var t=e.property,n=e.subject,u=e.embedded,l=e.force,p=e.editable,d=e.owner,b=e.topEntity,j=e.shape,f=e.siblingsPath,h=e.config,O=(t.objectType,Object(i.useState)("")),v=Object(a.a)(O,2),g=v[0],y=v[1];return Object(s.jsx)(o.a.Fragment,{children:Object(s.jsx)("div",Object(r.a)(Object(r.a)({role:"main"},g?{className:g}:{}),{},{children:Object(s.jsx)("section",{className:"album",children:Object(s.jsx)("div",{className:"container"+(u?" px-0":"")+" editable-"+p,style:{border:"dashed 1px none"},children:Object(s.jsx)(c.a,Object(r.a)(Object(r.a)(Object(r.a)({subject:n,property:t,embedded:u,force:l,editable:p},d?{owner:d}:{}),b?{topEntity:b}:{}),{},{shape:j,siblingsPath:f,setCssClass:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?g.includes(e)||y(g+e+" "):g.includes(e)&&y(g.replace(new RegExp(e),""))},config:h}))})})}))})}},17:function(e,t,n){"use strict";n.d(t,"s",(function(){return j})),n.d(t,"t",(function(){return f})),n.d(t,"u",(function(){return h})),n.d(t,"v",(function(){return O})),n.d(t,"q",(function(){return v})),n.d(t,"r",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"w",(function(){return x})),n.d(t,"n",(function(){return w})),n.d(t,"k",(function(){return P})),n.d(t,"p",(function(){return S})),n.d(t,"x",(function(){return k})),n.d(t,"l",(function(){return L})),n.d(t,"b",(function(){return I})),n.d(t,"h",(function(){return N})),n.d(t,"c",(function(){return E})),n.d(t,"e",(function(){return q})),n.d(t,"d",(function(){return C})),n.d(t,"j",(function(){return V})),n.d(t,"i",(function(){return F})),n.d(t,"o",(function(){return T})),n.d(t,"m",(function(){return A})),n.d(t,"a",(function(){return R})),n.d(t,"f",(function(){return D}));var r=n(3),a=n(150),i=n(4),o=n(10),c=n(13),s=n(6),u=n(234),l=n.n(u),p=n(87),d=n(7),b=n(24),j=(n(61)("rde:common"),Object(s.b)({key:"uiLangState",default:["en"]})),f=Object(s.b)({key:"uiLitLangState",default:["en"]}),h=Object(s.b)({key:"uiReadyState",default:!1}),O=Object(s.b)({key:"uiTabState",default:-1}),v=(Object(s.b)({key:"uiRIDState",default:[]}),Object(s.b)({key:"uiEditState",default:""})),g=Object(s.b)({key:"uiGroupState",default:""}),y=(Object(s.b)({key:"uiHistoryState",default:{}}),{enabled:!1,subjectUri:"",propertyPath:"",parentPath:[]}),m={prev:y,next:y},x=Object(s.b)({key:"uiUndosState",default:{}}),w=(Object(s.b)({key:"uiNavState",default:""}),Object(s.b)({key:"sessionLoadedState",default:!1})),P=Object(s.b)({key:"profileIdState",default:""}),S=Object(s.b)({key:"uiDisabledTabsState",default:!1}),k=Object(s.b)({key:"userIdState",default:""}),L=(Object(s.b)({key:"reloadProfileState",default:!0}),Object(s.b)({key:"reloadEntityState",default:""})),I=Object(s.b)({key:"RIDprefixState",default:null}),N=Object(s.c)({key:"orderedByPropSelector",get:function(e){return function(t){var n=t.get,r=e.atom,a=e.propertyPath,i=e.order;if(a){i||(i="asc");var o=n(r);return l.a.orderBy(o.map((function(e){if(e instanceof d.g){var t=e,r=n(t.getAtomForProperty(a));return{s:t,k:Array.isArray(r)&&r.length?Number(r[0].value):"desc"===i?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER}}return{s:e,k:"asc"===i?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER}})),["k"],["asc"===i?"asc":"desc"]).map((function(e){return e.s}))}return[]}}}),E=(Object(s.c)({key:"personNamesLabelsSelector",get:function(e){return function(t){var n=t.get,r=e.atom;return r?n(r).map((function(e){return e.getAtomForProperty(p.f.uri)})).reduce((function(e,t){return[].concat(Object(c.a)(e),Object(c.a)(n(t)))}),[]):[]}}}),Object(s.b)({key:"initListAtom",default:[]})),q=Object(s.b)({key:"initStringAtom",default:""}),C=Object(s.b)({key:"initMapAtom",default:{}}),V=(Object(s.b)({key:"initkvAtom",default:{}}),Object(s.c)({key:"possiblePrefLabelsSelector",get:function(e){return function(t){for(var n=t.get,r={},a=function(){var t=c[i],a=[],s=e.canPushPrefLabelGroups[t];s.subprops&&Object.keys(s.subprops).map((function(e){if(!s.subprops||!s.subprops[e].atom)return[];var t,r=n(s.subprops[e].atom),i=Object(o.a)(r);try{for(i.s();!(t=i.n()).done;){var c,u=t.value,l=Object(o.a)(s.subprops[e].allowPush);try{for(l.s();!(c=l.n()).done;){var p=c.value;n(u.getAtomForProperty(p)).map((function(e){return a.push(e)}))}}catch(d){l.e(d)}finally{l.f()}}}catch(d){i.e(d)}finally{i.f()}return s.props&&s.props.map((function(e){n(e).map((function(e){return a.push(e)}))})),a})),a.length&&(r[t]=a)},i=0,c=Object.keys(e.canPushPrefLabelGroups);i<c.length;i++)a();return r}}})),F=Object(s.c)({key:"orderedNewValSelector",get:function(e){return function(t){var n=t.get,r=-1;if(e.atom){var a=e.order?e.order:"asc",i=n(e.atom);i.map((function(t,o){if(!(o<i.length-1-1)){var c=n(t.getAtomForProperty(e.propertyPath)),s=0;Array.isArray(c)&&c.length&&(s=Number(c[0].value)),(-1===r||"asc"===a&&s>=r||"desc"===a&&s<=r)&&(r="asc"===a?s+1:s-1)}}))}return r.toString()}}}),T=Object(s.c)({key:"toCopySelector",get:function(e){return function(t){var n,r=t.get,a=[];return null===(n=e.list)||void 0===n||n.map((function(e){var t=e.property,n=e.atom,i=r(n);a.push({k:t,val:i})})),a}},set:function(e){return function(t,n){var r,a=t.get,o=t.set,s=Object(i.a)(n,1)[0],u=s.k,l=s.val;null===(r=e.list)||void 0===r||r.map((function(e){var t=e.property,n=e.atom;u==t&&o(n,[].concat(Object(c.a)(a(n).filter((function(e){return e.value}))),Object(c.a)(l)))}))}}}),A=Object(s.b)({key:"savePopupState",default:!1}),R=Object(s.c)({key:"ESfromRecoilSelector",get:function(e){return Object(a.a)(e),function(e){e.get;return!0}},set:function(e){return Object(a.a)(e),function(e,t){var n=e.get,a=e.set,i=n(b.c),o=function(e){return a(b.c,e)},s=i.findIndex((function(e){return e.subjectQname===t.entityQname}));if(s>-1){var u=i[s];if(t.status===b.a.Error){if(d.h[u.subjectQname]||(d.h[u.subjectQname]={}),d.h[u.subjectQname][t.subject.qname+";"+t.property.qname+";"+t.id]=!0,u.state!=t.status){var l=Object(c.a)(i);l[s]=Object(r.a)(Object(r.a)({},i[s]),{},{state:t.status}),o(l)}return}var p=!u.etag||t.undo&&(!t.undo.prev||t.undo.prev.enabled)||u.loadedUnsavedFromLocalStorage?b.a.NeedsSaving:b.a.Saved,j=d.h[u.subjectQname]&&d.h[u.subjectQname][t.subject.qname+";"+t.property.qname+";"+t.id];if(u.state!=p||j&&t.forceRemove){if(t.removingFacet){if(d.h[u.subjectQname])for(var f=0,h=Object.keys(d.h[u.subjectQname]);f<h.length;f++){var O=h[f];O.startsWith(t.id)&&delete d.h[u.subjectQname][O]}}else j&&delete d.h[u.subjectQname][t.subject.qname+";"+t.property.qname+";"+t.id];if(!d.h[u.subjectQname]||!Object.keys(d.h[u.subjectQname]).length){var v=Object(c.a)(i);v[s]=Object(r.a)(Object(r.a)({},i[s]),{},{state:p}),o(v)}}}}}}),D=Object(s.c)({key:"isUniqueTestSelector",get:function(e){return function(t){var n=t.get;if(!e.checkUnique)return!0;var r,a=n(e.siblingsAtom),i=[],c=Object(o.a)(a);try{for(c.s();!(r=c.n()).done;){var s=n(r.value.getAtomForProperty(e.propertyPath));if(s.length){if(i.includes(s[0].value))return!1;i.push(s[0].value)}}}catch(u){c.e(u)}finally{c.f()}return!0}}})},18:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return y})),n.d(t,"b",(function(){return w})),n.d(t,"h",(function(){return k}));var r=n(3),a=n(4),i=n(14),o=n(16),c=n(37),s="http://datashapes.org/dash#",u=c.a(s),l="http://www.w3.org/2002/07/owl#",p=(c.a(l),"http://www.w3.org/2000/01/rdf-schema#"),d=c.a(p),b="http://www.w3.org/ns/shacl#",j=c.a(b),f="http://www.w3.org/1999/02/22-rdf-syntax-ns#",h=c.a(f),O="http://www.w3.org/2004/02/skos/core#",v=c.a(O),g="http://www.w3.org/2001/XMLSchema#",y=c.a(g),m="http://xmlns.com/foaf/0.1/",x=(c.a(m),"https://github.com/buda-base/rdf-document-editor/"),w=c.a(x),P=(n(61)("rde:rdf:ns"),{dash:s,owl:l,rde:x,rdfs:p,sh:b,rdf:f,skos:O,xsd:g,foaf:m}),S=Object(i.a)((function e(t){var n=this;Object(o.a)(this,e),this.prefixToURI=void 0,this.URItoPrefix=void 0,this.setDefaultPrefixes=function(e){for(var t=0,r=Object.entries(n.prefixToURI);t<r.length;t++){var i=Object(a.a)(r[t],2),o=i[0],c=i[1];e.setPrefixForURI(o,c)}},this.qnameFromUri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.match(/^[^:/#]+:[^:/#]+$/))return e;var t=e.indexOf("#");if(t<0&&(t=e.lastIndexOf("/")),t<0)throw new Error("Cannot make qname out of <"+e+">");var r=e.slice(t+1),a=e.slice(0,t+1),i=n.URItoPrefix[a];if(!i)throw new Error("Cannot make qname out of <"+e+">");return i+":"+r},this.lnameFromUri=function(e){var t=e.indexOf("#");if(t<0&&(t=e.lastIndexOf("/")),t<0)throw new Error("Cannot make qname out of <"+e+">");return e.slice(t+1)},this.namespaceFromUri=function(e){var t=e.indexOf("#");if(t<0&&(t=e.lastIndexOf("/")),t<0)throw new Error("Cannot make namespace out of <"+e+">");return e.slice(0,t+1)},this.uriFromQname=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf(":");if(t<0)throw new Error("Cannot make uri out of <"+e+">");var r=e.slice(t+1),a=e.slice(0,t),i=n.prefixToURI[a];if(!i)throw new Error("Cannot make uri out of <"+e+">");return i+r},this.lnameFromQname=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf(":");if(t<0)throw new Error("Cannot make lname out of <"+e+">");return e.slice(t+1)},this.prefixToURI=Object(r.a)(Object(r.a)({},P),t),this.URItoPrefix={};for(var i=0,c=Object.entries(this.prefixToURI);i<c.length;i++){var s=Object(a.a)(c[i],2),u=s[0],l=s[1];this.URItoPrefix[l]=u}})),k=new S({})},237:function(e,t,n){"use strict";(function(e){var r=n(10),a=n(22),i=n(45),o=n(4),c=n(3),s=n(13),u=n(0),l=n.n(u),p=n(49),d=n(56),b=n(7),j=n(87),f=n(18),h=n(6),O=n(364),v=n(123),g=n(105),y=n(142),m=n(41),x=n(25),w=n(138),P=n(48),S=n(53),k=n(17),L=n(24),I=n(59),N=n(174),E=n(1),q=n(61)("rde:entity:container:ValueList");function C(e,t,n){return[].concat(Object(s.a)(e.slice(0,t)),[n],Object(s.a)(e.slice(t+1)))}function V(e,t){return[].concat(Object(s.a)(e.slice(0,t)),Object(s.a)(e.slice(t+1)))}var F=function(e){var t=e.add,n=e.className,r=e.disable;return Object(E.jsx)("div",{className:"minimalAdd disable_"+r+(void 0!==n?n:" text-right"),children:Object(E.jsx)("button",Object(c.a)(Object(c.a)({className:"btn btn-link ml-2 px-0",onClick:function(e){return t(e,1)}},r?{disabled:!0}:{}),{},{children:Object(E.jsx)(m.a,{})}))})},T=function(e){var t=e.add,n=e.label,r=e.count,a=void 0===r?1:r,i=Object(u.useState)(1),s=Object(o.a)(i,2),l=s[0],p=s[1],d=Object(u.useState)(!1),b=Object(o.a)(d,2),j=b[0];b[1];return Object(E.jsxs)("div",{className:"blockAdd text-center pb-1 mt-3",style:Object(c.a)({width:"100%"},a>1?{display:"flex"}:{}),children:[Object(E.jsx)("button",{className:"btn btn-sm btn-block btn-outline-primary px-0",style:Object(c.a)({boxShadow:"none",pointerEvents:j?"none":"auto"},j?{opacity:.5,pointerEvents:"none"}:{}),onClick:function(e){return t(e,l)},children:Object(E.jsxs)(E.Fragment,{children:[x.a.t("general.add_another",{val:n,count:a}),"\xa0",Object(E.jsx)(m.a,{})]})}),a>1&&Object(E.jsx)(v.a,{label:Object(E.jsx)(E.Fragment,{children:x.a.t("general.add_nb",{val:n})}),style:{width:200},value:l,className:"ml-2",type:"number",InputLabelProps:{shrink:!0},onChange:function(e){return p(Number(e.target.value))},InputProps:{inputProps:{min:1,max:500}}})]})},A=function(){var e=Object(i.a)(Object(a.a)().mark((function e(t,n,r,i){var o,c,s,u,l,p,d,h,O,v=arguments;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=v.length>4&&void 0!==v[4]?v[4]:"",s=v.length>5?v[5]:void 0,e.t0=t.objectType,e.next=e.t0===b.d.ResExt?5:e.t0===b.d.Internal?7:e.t0===b.d.ResInList?11:e.t0===b.d.LitInList?20:(e.t0,b.d.Literal,35);break;case 5:return e.abrupt("return",new b.b("tmp:uri",{},{},s));case 7:if(null!=t.targetShape){e.next=9;break}throw"no target shape for "+t.uri;case 9:return e.abrupt("return",Object(j.c)(t.targetShape,n));case 11:if(!t.defaultValue){e.next=13;break}return e.abrupt("return",new b.b(t.defaultValue.value,{},{},s));case 13:if(t.minCount){e.next=15;break}return e.abrupt("return",b.i);case 15:if(u=t.in){e.next=18;break}throw"can't find a list for "+t.uri;case 18:return e.abrupt("return",u[0]);case 20:if(null===(l=t.defaultValue)){e.next=23;break}return e.abrupt("return",new b.c(l.value,l.language,l.datatype));case 23:if(t.minCount){e.next=30;break}if((null===(p=t.datatype)||void 0===p?void 0:p.value)!==f.c("langString").value){e.next=29;break}return e.abrupt("return",new b.c("",null!==t&&void 0!==t&&t.defaultLanguage?t.defaultLanguage:"bo-x-ewts"));case 29:case 47:return e.abrupt("return",new b.c("",null,t.datatype?t.datatype:void 0));case 30:if(d=t.in){e.next=33;break}throw"can't find a list for "+t.uri;case 33:return e.abrupt("return",d[0]);case 35:if(null===(h=t.defaultValue)){e.next=38;break}return e.abrupt("return",new b.c(h.value,h.language,h.datatype));case 38:if((O=null===(o=t.datatype)||void 0===o?void 0:o.value)!==f.c("langString").value){e.next=43;break}return e.abrupt("return",new b.c("",null!==t&&void 0!==t&&t.defaultLanguage?t.defaultLanguage:"bo-x-ewts"));case 43:if(O!==f.g("integer").value){e.next=47;break}return e.abrupt("return",new b.c(c,null,t.datatype?t.datatype:void 0));case 48:return e.abrupt("break",49);case 49:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),R=function(t){var n,r,c,l=t.subject,d=t.property,j=t.embedded,f=t.disable,O=t.newVal,v=(t.shape,t.config);if(null==d.path)throw"can't find path of "+d.qname;var g=Object(h.e)(l.getAtomForProperty(d.path.sparqlString)),y=Object(o.a)(g,2),m=y[0],x=y[1],w=null;1===m.length&&m[0]instanceof b.e&&m[0].node&&m[0].node instanceof p.a&&(w=m[0].node);var S="Collection"===(null===(n=w)||void 0===n?void 0:n.termType)?null===(r=w)||void 0===r?void 0:r.elements:void 0,I=S||m,q=Object(h.e)(k.s),C=Object(o.a)(q,1)[0],V=Object(h.e)(L.c),R=Object(o.a)(V,2),D=R[0],Q=(R[1],Object(h.e)(k.v)),U=Object(o.a)(Q,1)[0],M=(D.findIndex((function(e,t){return t===U})),Object(h.e)(k.q)),B=Object(o.a)(M,2),H=(B[0],B[1]),_=Object(u.useState)(localStorage.getItem("BLMPidToken")),G=Object(o.a)(_,2),W=G[0],z=(G[1],Object(h.e)(k.b)),K=Object(o.a)(z,2),X=K[0],$=(K[1],Object(N.a)().getIdTokenClaims,Object(h.e)(k.l)),J=Object(o.a)($,2),Y=(J[0],J[1],Object(h.f)(d.sortOnProperty?Object(k.i)({atom:d.sortOnProperty?l.getAtomForProperty(d.path.sparqlString):null,propertyPath:d.sortOnProperty.value}):k.e)),Z=null===(c=d.targetShape)||void 0===c?void 0:c.properties.filter((function(e){var t,n;return(null===(t=e.path)||void 0===t?void 0:t.sparqlString)===(null===(n=d.sortOnProperty)||void 0===n?void 0:n.value)}));if(null!==Z&&void 0!==Z&&Z.length){var ee=Z[0];null!=(null===ee||void 0===ee?void 0:ee.minInclusive)&&Number(Y)<ee.minInclusive&&(Y=ee.minInclusive.toString()),null!=(null===ee||void 0===ee?void 0:ee.maxInclusive)&&Number(Y)>ee.maxInclusive&&(Y=ee.maxInclusive.toString())}var te=!1,ne=function(){var t=Object(i.a)(Object(a.a)().mark((function t(n,r){var i;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!te){t.next=2;break}return t.abrupt("return");case 2:return d.objectType===b.d.Internal&&(te=!0,l.noHisto(!1,1)),t.next=5,A(d,l,X,W,null===O||void 0===O?void 0:O.toString(),v);case 5:i=t.sent,x([].concat(Object(s.a)(I),[i])),d.objectType===b.d.Internal&&i instanceof b.g&&(e((function(){H(l.qname+" "+d.qname+" "+i.qname)})),setTimeout((function(){l.noHisto(!1,!1),te=!1}),350));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();if(d.objectType===b.d.Internal||!j&&d.objectType!=b.d.Literal&&d.objectType!=b.d.ResInList&&d.objectType!=b.d.LitInList){var re,ae=null===(re=d.targetShape)||void 0===re?void 0:re.targetClassPrefLabels,ie=ae||d.prefLabels,oe=d.allowBatchManagement?2:1;return Object(E.jsx)(T,{add:ne,label:Object(P.a)(ie,C),count:oe})}return Object(E.jsx)(F,{disable:f,add:ne,className:" "})},D=Object(O.a)((function(e){return{root:{"& .MuiFormHelperText-root":{color:e.palette.secondary.main}}}})),Q=function(e){var t=e.property,n=e.lit,r=e.onChange,a=e.label,i=e.globalError,p=e.editable,d=e.updateEntityState,j=e.entity,O=(e.index,e.config),y=(D(),Object(u.useState)(!1)),w=Object(o.a)(y,2),P=w[0],S=w[1],N=Object(u.useState)(!1),q=Object(o.a)(N,2),V=q[0],F=q[1],T=t.allowPushToTopLevelLabel,A=function(e){var n="";return!e&&t.minCount?n=x.a.t("error.empty"):i&&(n=i),n},R=Object(u.useState)(null),Q=Object(o.a)(R,2),M=Q[0],B=Q[1];Object(u.useEffect)((function(){var e=A(n.value);e!=M&&(d(e?L.a.Error:L.a.Saved,n.id),B(e))})),Object(u.useEffect)((function(){return function(){var e=!window.location.href.includes("/"+j.qname+"/");e||d(L.a.Saved,n.id,!1,!e)}}),[]);l.a.Fragment,m.d;var H=Object(u.useState)(null),_=Object(o.a)(H,2),G=_[0],W=_[1];Object(u.useLayoutEffect)((function(){if(document.activeElement===J.current){var e=O.previewLiteral(n,ie),t=e.value,r=e.error;W(t),B(r)}else W(null)}));var z="0px";G?z="40px":t.singleLine&&P&&(z="1px");var K=Object(c.a)(Object(c.a)({},I.a.codeEdit),{},{icon:Object(E.jsx)(m.c,{style:{width:"12px",height:"12px"}})}),X=Object(c.a)(Object(c.a)({},I.a.codePreview),{},{icon:Object(E.jsx)(m.i,{style:{width:"12px",height:"12px"}})}),$=O.possibleLiteralLangs.filter((function(e){return e.value===n.language})),J=Object(u.useRef)(),Y=function(){J.current&&document.activeElement!=J.current&&J.current.focus()},Z=null===j||void 0===j?void 0:j.getAtomForProperty(f.f("prefLabel").value);Z||(Z=k.c);var ee=Object(h.e)(Z),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ae=Object(h.e)(k.s),ie=Object(o.a)(ae,1)[0];return Object(E.jsxs)("div",{className:"mb-0"+(G?" withPreview":""),style:{display:"flex",width:"100%",alignItems:"flex-end",paddingBottom:z,position:"relative"},children:[T&&!M&&!i&&Object(E.jsx)("span",{className:"canPushPrefLabel",children:Object(E.jsx)("span",{onClick:function(){var e=[],t=!1;for(var r in ne){if(ne[r]instanceof b.c)if(ne[r].language===n.language){t=!0,e=C(ne,Number(r),n);break}}t||(e=[].concat(Object(s.a)(ne),[n.copy()])),e.length&&re(e)},children:Object(E.jsx)(g.a,{title:Object(E.jsx)(E.Fragment,{children:"Use as the main name or title for this language"}),children:Object(E.jsx)("span",{className:"img"})},n.id)})}),(t.singleLine||!P)&&Object(E.jsxs)("div",{style:{width:"100%",position:"relative"},children:[Object(E.jsx)(v.a,Object(c.a)(Object(c.a)(Object(c.a)({variant:"standard",inputRef:J,className:"bo"===n.language?" lang-bo":"",label:a,style:{width:"100%"},value:n.value,multiline:!t.singleLine,InputLabelProps:{shrink:!0},inputProps:{spellCheck:"true",lang:"en"===n.language?"en_US":n.language},onChange:function(e){var t=A(n.value);t&&M!=t?B(t):d(t?L.a.Error:L.a.Saved,n.id),r(n.copyWithUpdatedValue(e.target.value))}},M?{error:!0,helperText:M}:{}),p?{}:{disabled:!0}),{},{onFocus:function(){var e=O.previewLiteral(n,ie),t=e.value,r=e.error;W(t),B(r)},onBlur:function(){W(null),setTimeout((function(){J.current&&document.activeElement!=J.current&&F(!1)}),350)}})),t.allowMarkDown&&Object(E.jsxs)("span",{className:"opaHover",style:{position:"absolute",right:0,top:0,fontSize:"0px"},onClick:function(){return S(!P)},children:[!P&&Object(E.jsx)(m.g,{style:{height:"16px"}}),P&&Object(E.jsx)(m.g,{style:{height:"16px"}})]}),$.length>0&&$[0].keyboard&&Object(E.jsx)("span",{onClick:function(){F(!V),Y()},className:"opaHover "+(V?"on":""),style:{position:"absolute",right:0,top:"0px",height:"100%",display:"flex",alignItems:"center"},children:Object(E.jsx)(m.f,{})}),$.length>0&&$[0].keyboard&&V&&Object(E.jsx)("div",{className:"card px-2 py-2 hasKB",style:{display:"block",width:"405px"},onClick:Y,children:$[0].keyboard.map((function(e,t){return Object(E.jsx)("span",{className:"card mx-1 my-1",style:{display:"inline-flex",width:"40px",height:"40px",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:function(){return function(e){if(J.current){var t=J.current,a=t.selectionStart,i=t.selectionEnd,o=t.value,c=o.substring(0,a||0)+e+o.substring(i||0);r(n.copyWithUpdatedValue(c)),setTimeout((function(){J.current&&(J.current.selectionStart=(a||0)+e.length,J.current.selectionEnd=J.current.selectionStart)}),10)}}(e)},children:e},t)}))})]}),!t.singleLine&&P&&Object(E.jsxs)("div",{style:{width:"100%",position:"relative",paddingBottom:"1px"},children:[Object(E.jsx)(I.b,{textareaProps:{spellCheck:"true",lang:"en"===n.language?"en_US":n.language},value:n.value,preview:"edit",onChange:function(e){e&&r(n.copyWithUpdatedValue(e))},commands:[I.a.bold,I.a.italic,I.a.strikethrough,I.a.hr,I.a.title,I.a.divider,I.a.link,I.a.quote,I.a.code,I.a.image,I.a.divider,I.a.unorderedListCommand,I.a.orderedListCommand,I.a.checkedListCommand,I.a.divider,K,X],extraCommands:[]}),Object(E.jsx)("span",{className:"opaHover on",style:{position:"absolute",right:"5px",top:"7px",fontSize:"0px",cursor:"pointer"},onClick:function(){return S(!P)},children:Object(E.jsx)(m.g,{style:{height:"15px"},title:"Use rich text editor"})})]}),Object(E.jsx)(U,Object(c.a)(Object(c.a)({onChange:function(e){r(n.copyWithUpdatedLanguage(e))},value:n.language||"",property:t},M?{error:!0}:{}),{},{editable:p,config:O})),G&&Object(E.jsx)("div",{className:"preview-ewts",children:Object(E.jsx)(v.a,{disabled:!0,value:G})})]})},U=function(e){var t=e.onChange,n=e.value,r=e.property,a=e.disabled,i=e.error,o=e.editable,s=e.config,u=null!==r&&void 0!==r&&r.defaultLanguage?Object(P.b)(r.defaultLanguage,s.possibleLiteralLangs):s.possibleLiteralLangs;return Object(E.jsx)("div",{style:{position:"relative"},children:Object(E.jsxs)(v.a,Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({select:!0,InputLabelProps:{shrink:!0},className:"ml-2",value:n,style:{minWidth:100,flexShrink:0,marginTop:"5px"},onChange:function(e){t(e.target.value)}},a?{disabled:!0}:{}),i?{error:!0,helperText:Object(E.jsx)("br",{})}:{}),o?{}:{disabled:!0}),{},{children:[u.map((function(e){return Object(E.jsx)(y.a,{value:e.value,children:e.value},e.value)})),!u.some((function(e){return e.value===n}))&&Object(E.jsx)(y.a,{value:n,children:n},n)]}))})},M=function(e){var t=e.property,n=e.lit,r=e.onChange,a=e.label,i=e.editable,s=e.updateEntityState,l=(e.entity,e.index,e.config),p=(D(),Object(h.e)(k.s)),b=Object(o.a)(p,1)[0],j=(t.datatype,t.pattern?new RegExp(t.pattern):void 0),f=Object(u.useState)(null),O=Object(o.a)(f,2),g=O[0],y=O[1],w=Object(u.useState)(null),S=Object(o.a)(w,2),I=S[0],N=S[1],C=0,V=function(e){};Object(u.useEffect)((function(){V=function(e){if(""===e)y(null),N(null),s(L.a.Saved,n.id);else{C&&window.clearTimeout(C);C=window.setTimeout((function(){var r=l.previewLiteral(new d.a(e,n.language,n.datatype),b),a=r.value,i=r.error;N(a),i||(i=function(e){var n="";return void 0===j||""===e||e.match(j)||(n=Object(P.a)(t.errorMessage,b),q("err:",t.errorMessage)),n}(e)),y(i),s(i?L.a.Error:L.a.Saved,n.id)}),350)}r(n.copyWithUpdatedValue(e))}}));return Object(u.useEffect)((function(){var e=g||function(e){if(e||!t.minCount)return E.Fragment,m.d,E.Fragment,x.a.t("error.empty"),null}(n.value);e!=g&&(y(e),s(e?L.a.Error:L.a.Saved,n.id))})),Object(E.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(E.jsx)(v.a,Object(c.a)(Object(c.a)(Object(c.a)({variant:"standard",label:a,style:{width:"100%"},value:n.value},"bds:NoteShape-contentLocationStatement"!==t.qname?{InputLabelProps:{shrink:!0}}:{}),{},{onBlur:function(e){return N(null)},onFocus:function(e){return V(e.target.value)},onChange:function(e){return V(e.target.value)}},i?{}:{disabled:!0}),g?{error:!0,helperText:g}:{})),I&&Object(E.jsx)("div",{className:"preview-EDTF",style:{width:"100%"},children:Object(E.jsx)("pre",{children:I})})]})},B=function(e){var t=e.property,n=e.lit,r=e.onChange,a=e.label,i=e.editable,o=(D(),t.datatype,!(!n.value||"false"==n.value||"0"==n.value));null===t.defaultValue&&""==n.value&&(o="unset");var s=function(e){r(n.copyWithUpdatedValue("false"==e?"0":"1"))};return Object(E.jsx)(v.a,Object(c.a)(Object(c.a)({select:!0,style:{padding:"1px",minWidth:"250px"},label:a,value:o,InputLabelProps:{shrink:!0},onChange:function(e){"-"!=e.target.value&&s(e.target.value)}},i?{}:{disabled:!0}),{},{children:["true","false"].concat("unset"===o?[o]:[]).map((function(e){return Object(E.jsx)(y.a,{value:e,children:x.a.t("types."+e)},e)}))}))},H=function(e){var t=e.property,n=e.lit,r=e.onChange,a=e.label,i=e.editable,s=e.updateEntityState,p=e.hasNoOtherValue,d=(e.index,e.globalError),b=(D(),t.datatype),j=t.minInclusive,f=t.maxInclusive,h=t.minExclusive,O=t.maxExclusive,g=function(e){var t="";if(d)t=d;else if(p&&""===e)t=x.a.t("error.empty");else if(void 0!==e&&""!==e){var n=parseInt(e);j&&j>n?t=x.a.t("error.superiorTo",{val:j}):f&&f<n?t=x.a.t("error.inferiorTo",{val:f}):h&&h>=n?t=x.a.t("error.superiorToStrict",{val:h}):O&&O<=n&&(t=x.a.t("error.inferiorToStrict",{val:O}))}return t},y=Object(u.useState)(""),w=Object(o.a)(y,2),P=w[0],S=w[1];Object(u.useEffect)((function(){if(p||void 0!==n.value&&null!==n.value&&""!==n.value){var e=g(n.value);e!=P&&(S(e),s(e?L.a.Error:L.a.Saved,n.id))}}));var k=function(e){var t=g(e);t!=P?S(t):s(t?L.a.Error:L.a.Saved,n.id),b&&b.value==_&&(e=e.startsWith("-")?"-"+e.substring(1).padStart(4,"0"):e.padStart(4,"0")),r(n.copyWithUpdatedValue(e))},I=n.value;return b&&b.value==_&&(I=I.replace(/^(-?)0+/,"$1")),Object(E.jsx)(v.a,Object(c.a)(Object(c.a)({label:a,style:{width:240},value:I},P?{helperText:Object(E.jsxs)(l.a.Fragment,{children:[Object(E.jsx)(m.d,{style:{fontSize:"20px",verticalAlign:"-7px"}}),Object(E.jsxs)("i",{children:[" ",P]})]}),error:!0}:{}),{},{type:"number",InputProps:{inputProps:{min:j,max:f}},InputLabelProps:{shrink:!0},onChange:function(e){return k(e.target.value)}},i?{}:{disabled:!0}))},_=f.g("gYear").value,G=f.c("langString").value,W=f.g("integer").value,z=f.g("decimal").value,K=f.g("int").value,X=f.g("boolean").value,$=[W,z,K],J=function(e){var t=e.lit,n=e.subject,r=e.property,a=e.canDel,i=e.isUniqueValueAmongSiblings,s=e.isUniqueLang,l=e.create,p=e.editable,d=e.topEntity,j=e.updateEntityState,f=e.config;if(null==r.path)throw"can't find path of "+r.qname;var O=Object(h.e)(n.getAtomForProperty(r.path.sparqlString)),v=Object(o.a)(O,2),y=v[0],w=v[1],S=y.findIndex((function(e){return e===t})),I=Object(h.e)(L.c),N=Object(o.a)(I,2),q=N[0],F=(N[1],Object(h.e)(k.w)),T=Object(o.a)(F,2),A=T[0],R=(T[1],Object(h.e)(k.s)),D=Object(o.a)(R,1)[0],U=Object(P.a)(r.prefLabels,D),W=Object(P.a)(r.helpMessage,D),z=function(e){var t=C(y,S,e);w(t)};Object(u.useEffect)((function(){var e=!1,r=d?d.qname:n.qname,a=q.findIndex((function(e){return e.subjectQname===r}));a>-1&&(q[a].state===L.a.Error&&(e=!0));e||b.h[r]&&Object.keys(b.h[r]).length||j(L.a.Saved,t.id)}),[A]);var K,J,Y=r.datatype;return(null===Y||void 0===Y?void 0:Y.value)===G?(J="langString "+(t.value?"lang-"+t.language:""),K=Object(E.jsx)(Q,Object(c.a)(Object(c.a)({property:r,lit:t,onChange:z,label:[U,W?Object(E.jsx)(g.a,{title:W,children:Object(E.jsx)(m.e,{className:"help literal"})},t.id):null]},r.uniqueLang&&!s?{globalError:x.a.t("error.unique")}:{}),{},{editable:p&&!r.readOnly,updateEntityState:j,entity:d||n,index:S,config:f}))):(null===Y||void 0===Y?void 0:Y.value)===_||Y&&null!==Y&&void 0!==Y&&Y.value&&$.includes(Y.value)?(J="gYear intish",K=Object(E.jsx)(H,Object(c.a)({property:r,lit:t,onChange:z,label:[U,W?Object(E.jsx)(g.a,{title:W,children:Object(E.jsx)(m.e,{className:"help literal"})},t.id):null],editable:p&&!r.readOnly,updateEntityState:j,hasNoOtherValue:1===r.minCount&&1===y.length,index:S},r.uniqueValueAmongSiblings&&!i?{globalError:x.a.t("error.uniqueV")}:{}))):K=(null===Y||void 0===Y?void 0:Y.value)===X?Object(E.jsx)(B,{property:r,lit:t,onChange:z,label:[U,W?Object(E.jsx)(g.a,{title:W,children:Object(E.jsx)(m.e,{className:"help literal"})},t.id):null],editable:p&&!r.readOnly}):Object(E.jsx)(M,{property:r,lit:t,onChange:z,label:[U,W?Object(E.jsx)(g.a,{title:W,children:Object(E.jsx)(m.e,{className:"help literal"})},t.id):null],editable:p&&!r.readOnly,updateEntityState:j,entity:n,index:S,config:f}),Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:J,style:{display:"flex",alignItems:"flex-end"},children:[K,Object(E.jsxs)("div",{className:"hoverPart",children:[Object(E.jsx)("button",Object(c.a)(Object(c.a)({className:"btn btn-link ml-2 px-0 py-0 close-facet-btn",onClick:function(){var e=V(y,S);w(e),j(L.a.Saved,t.id)}},a?{}:{disabled:!0}),{},{children:Object(E.jsx)(m.h,{className:"my-0 close-facet-btn"})})),l]})]})})},Y=function(e){var t=e.subNode,n=e.subject,r=e.property,a=e.canDel,i=e.editable,s=e.topEntity,l=e.updateEntityState,p=e.shape,d=e.config;if(null==r.path)throw"can't find path of "+r.qname;var b=Object(h.e)(n.getAtomForProperty(r.path.sparqlString)),j=Object(o.a)(b,2),f=j[0],O=j[1],v=Object(h.e)(k.s),y=Object(o.a)(v,1)[0],S=f.findIndex((function(e){return e===t})),I=Object(h.e)(L.c),N=Object(o.a)(I,2),q=(N[0],N[1],r.targetShape);if(!q)throw"unable to find target shape of "+r.lname;var C=[],F=[];q.properties.map((function(e){e.displayPriority&&e.displayPriority>=1?C.push(e):F.push(e)}));var T=Object(u.useState)(!1),A=Object(o.a)(T,2),R=A[0],D=A[1],Q=C.length>0,U=!1,M=Object(h.e)(k.q),B=Object(o.a)(M,2),H=B[0],_=B[1],G="";return(H===n.qname+" "+r.qname+" "+t.qname||H.startsWith(t.qname+" ")||H.endsWith(" "+n.qname))&&(G="edit"),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("div",{className:"facet "+G+" editable-"+i+" force-"+R,onClick:function(e){var a;_(n.qname+" "+r.qname+" "+t.qname);var i=e.target;(G||null!==i&&void 0!==i&&i.classList&&(null===i||void 0===i||null===(a=i.classList)||void 0===a||!a.contains("close-facet-btn")))&&e.stopPropagation()},children:Object(E.jsxs)("div",{className:"card pt-2 pb-3 pr-3 mt-4 pl-2 "+(Q?"hasDisplayPriority":""),children:[q.independentIdentifiers&&Object(E.jsx)("div",{className:"internalId",children:t.lname}),F.map((function(e,a){var i;return Object(E.jsx)(w.a,{property:e,subject:t,embedded:!0,force:R,editable:!e.readOnly,owner:n,topEntity:s,shape:p,siblingsPath:null===(i=r.path)||void 0===i?void 0:i.sparqlString,config:d},a+e.uri)})),C.map((function(e,a){var i;return Object(E.jsx)(w.a,{property:e,subject:t,embedded:!0,force:R,editable:!e.readOnly,owner:n,topEntity:s,shape:p,siblingsPath:null===(i=r.path)||void 0===i?void 0:i.sparqlString,config:d},a+e.uri)})),Q&&Object(E.jsx)("span",{className:"toggle-btn btn btn-rouge mt-4",onClick:function(){if(!U){U=!0,n.noHisto(!1,-1),D(!R);setTimeout((function(){n.noHisto(!1,!1),n.resetNoHisto(),U=!1}),350)}},children:Object(E.jsx)(E.Fragment,{children:x.a.t("general.toggle",{show:R?x.a.t("general.hide"):x.a.t("general.show")})})}),Object(E.jsxs)("div",{className:"close-btn",children:[q.description&&Object(E.jsx)(g.a,{title:Object(P.a)(q.description,y),children:Object(E.jsx)(m.e,{className:"help"})}),Object(E.jsx)("button",Object(c.a)(Object(c.a)({className:"btn btn-link ml-2 px-0 close-facet-btn py-0",onClick:function(){l(L.a.Saved,t.qname,!0);var e=V(f,S);O(e)}},a?{}:{disabled:!0}),{},{children:Object(E.jsx)(m.b,{className:"close-facet-btn my-1"})}))]})]})})})},Z=function(e){var t=e.extRes,n=e.subject,r=e.property,a=e.canDel,i=e.onChange,s=e.idx,l=e.exists,p=e.editable,d=e.owner,j=e.title,f=e.updateEntityState,O=e.shape,v=e.config;if(null==r.path)throw"can't find path of "+r.qname;var g=Object(h.e)(n.getAtomForProperty(r.path.sparqlString)),y=Object(o.a)(g,2),w=y[0],P=y[1],S=w.findIndex((function(e){return e===t})),k=Object(h.e)(L.c),I=Object(o.a)(k,2),N=(I[0],I[1],Object(u.useState)("")),q=Object(o.a)(N,2),C=q[0],F=q[1];return Object(u.useEffect)((function(){var e,t=w.filter((function(e){return e instanceof b.e&&"tmp:uri"!==e.uri}));e=r.minCount&&t.length<r.minCount?x.a.t("error.minC",{count:r.minCount}):r.maxCount&&t.length>r.maxCount?x.a.t("error.maxC",{count:r.maxCount}):"",F(e),f(e?L.a.Error:L.a.Saved,r.qname)}),[w]),Object(E.jsx)("div",{className:"extEntity"+("tmp:uri"===t.uri?" new":""),style:{position:"relative"},children:Object(E.jsxs)("div",Object(c.a)(Object(c.a)({style:Object(c.a)({},"tmp:uri"!==t.uri?{display:"inline-flex",width:"auto",backgroundColor:"#f0f0f0",borderRadius:"4px",border:"1px solid #ccc",flexDirection:"row",position:"static"}:{display:"flex"})},"tmp:uri"!==t.uri?{className:"px-2 py-1 mr-2 mt-2 card"}:{}),{},{children:[Object(E.jsx)(v.resourceSelector,Object(c.a)(Object(c.a)({value:t,onChange:i,property:r,idx:s,exists:l,subject:n,editable:p},d?{owner:d}:{}),{},{title:j,globalError:C,updateEntityState:f,shape:O,config:v})),"tmp:uri"!==t.uri&&Object(E.jsx)("button",Object(c.a)(Object(c.a)({className:"btn btn-link ml-2 px-0",onClick:function(){var e=V(w,S);if(1===s&&1===e.length){var t=e[0];t instanceof b.b&&"tmp:uri"===t.uri&&(e=[])}P(e)}},a?{}:{disabled:!0}),{},{children:"tmp:uri"===t.uri?Object(E.jsx)(m.h,{}):Object(E.jsx)(m.b,{})}))]}))})},ee=function(e){var t=e.res,n=e.subject,a=e.property,i=e.canDel,p=e.canSelectNone,d=e.selectIdx,j=e.editable,f=e.create,O=e.updateEntityState;if(null==a.path)throw"can't find path of "+a.qname;var w=Object(h.e)(n.getAtomForProperty(a.path.sparqlString)),S=Object(o.a)(w,2),I=S[0],N=S[1],F=Object(h.e)(k.s),T=Object(o.a)(F,2),A=T[0],R=(T[1],Object(h.e)(k.t)),Q=Object(o.a)(R,2),U=Q[0],M=(Q[1],Object(h.e)(L.c)),B=Object(o.a)(M,2),H=B[0],_=(B[1],Object(h.e)(k.v)),G=Object(o.a)(_,1)[0],W=H.findIndex((function(e,t){return t===G})),z=Object(P.a)(a.prefLabels,A),K=Object(P.a)(a.helpMessage,U),X=a.in;if(null==X)throw"can't find possible list for "+a.uri;p&&(X=[b.i].concat(Object(s.a)(X)));var $=d,J=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===X)return null;var n,a=Object(r.a)(X);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id===e||t&&i.value===e)return i}}catch(o){a.e(o)}finally{a.f()}return q("error cannot get element from value "+e),null},Y=t instanceof b.f?t:J(I[$].value,!0);D();1==X.length&&0==I.length&&N([X[0]]);var Z=Object(u.useState)(""),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],re=!X.some((function(e){return e.id===(null===Y||void 0===Y?void 0:Y.id)}));return Object(u.useEffect)((function(){var e,t;re?(ne(x.a.t("error.select",{val:null===Y||void 0===Y?void 0:Y.value})),O(L.a.Error,(null===(e=a.path)||void 0===e?void 0:e.sparqlString)+"_"+d)):O(L.a.Saved,(null===(t=a.path)||void 0===t?void 0:t.sparqlString)+"_"+d)}),[re]),Object(u.useEffect)((function(){return function(){var e,t,n=!window.location.href.includes("/"+(null===(e=H[W])||void 0===e?void 0:e.subjectQname)+"/");n||O(L.a.Saved,(null===(t=a.path)||void 0===t?void 0:t.sparqlString)+"_"+d,!1,!n)}}),[]),X.length>1||te?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"resSelect",style:{display:"inline-flex",alignItems:"flex-end"},children:[Object(E.jsxs)(v.a,Object(c.a)(Object(c.a)(Object(c.a)({select:!0,className:"selector mr-2",value:null===Y||void 0===Y?void 0:Y.id,style:{padding:"1px",minWidth:"250px"},onChange:function(e){var t,n=J(e.target.value);if(null==n)throw"getting value from SelectComponent that's not in the list of possible values "+e.target.value;t=n==b.i&&i?V(I,$):C(I,$,n),N(t)},label:[z,K?Object(E.jsx)(g.a,{title:K,children:Object(E.jsx)(m.e,{className:"help"})},"tooltip_"+d+"_"+$):null]},te?{helperText:Object(E.jsxs)(l.a.Fragment,{children:[Object(E.jsx)(m.d,{style:{fontSize:"20px",verticalAlign:"-7px"}}),Object(E.jsxs)("i",{children:[" ",te]})]}),error:!0}:{}),j?{}:{disabled:!0}),{},{children:[X.map((function(e,t){if(e instanceof b.f){var n=e,r=Object(P.a)(n.prefLabels,U),a=Object(E.jsx)("span",{children:r||n.lname});return Object(E.jsx)(y.a,{value:n.id,className:"withDescription",children:n.description?Object(E.jsx)(g.a,{title:Object(P.a)(n.description,U),children:a}):a},"menu-uri_"+d+n.id)}var i=e;return Object(E.jsx)(y.a,{value:i.id,className:"withDescription",children:i.value},"menu-lit_"+d+i.id+"_"+$+"_"+t)})),re&&Object(E.jsx)(y.a,{value:null===Y||void 0===Y?void 0:Y.id,className:"withDescription",style:{color:"red"},disabled:!0,children:null===Y||void 0===Y?void 0:Y.value},"extra-val-id")]}),"textfield_"+d+"_"+$),Object(E.jsxs)("div",{className:"hoverPart",children:[i&&Object(E.jsx)("button",{className:"btn btn-link mx-0 px-0 py-0",onClick:function(){var e=V(I,$);N(e)},children:Object(E.jsx)(m.h,{})}),f]})]})}):Object(E.jsx)(E.Fragment,{})};t.a=function(e){var t,n,s=e.subject,p=e.property,d=e.embedded,j=e.force,O=e.editable,v=e.owner,y=e.topEntity,x=e.shape,w=e.siblingsPath,I=e.setCssClass,N=e.config;if(null==p.path)throw"can't find path of "+p.qname;var q=Object(h.e)(s.getAtomForProperty(p.path.sparqlString)),V=Object(o.a)(q,2),F=V[0],T=V[1],D=Object(h.e)(k.s),Q=Object(o.a)(D,1)[0],U=Object(u.useState)(localStorage.getItem("BLMPidToken")),M=Object(o.a)(U,2),B=M[0],H=(M[1],Object(h.e)(k.b)),_=Object(o.a)(H,2),G=_[0],W=(_[1],Object(P.a)(p.prefLabels,Q)),z=Object(P.a)(p.helpMessage,Q),K=Object(h.e)(k.w),X=Object(o.a)(K,2),$=X[0],te=(X[1],Object(h.e)(L.c)),ne=Object(o.a)(te,2),re=(ne[0],ne[1],null===p||void 0===p||null===(t=p.sortOnProperty)||void 0===t?void 0:t.value),ae=Object(h.f)(Object(k.h)({atom:s.getAtomForProperty(p.path.sparqlString),propertyPath:re||""})),ie=F;ae.length&&(ie=ae);var oe=x.properties.filter((function(e){var t,n;return(null===(t=e.sortOnProperty)||void 0===t?void 0:t.value)===(null===(n=p.path)||void 0===n?void 0:n.sparqlString)})),ce=Object(h.f)(Object(k.i)({atom:oe.length&&oe[0].path?(y||s).getAtomForProperty(oe[0].path.sparqlString):null,propertyPath:p.path.sparqlString}));if(""!=ce){var se=Number(ce);p.minInclusive&&se<p.minInclusive&&(ce=p.minInclusive.toString()),p.maxInclusive&&se>p.maxInclusive&&(ce=p.maxInclusive.toString())}var ue=Object(h.e)(Object(k.a)({})),le=Object(o.a)(ue,2),pe=(le[0],le[1]),de=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0===t)throw new Error("id undefined");var a=y?y.qname:s.qname,i=$[f.h.uriFromQname(a)],o=Object(S.a)(f.h.uriFromQname(a));pe({property:p,subject:s,entityQname:a,undo:i,hStatus:o,status:e,id:t,removingFacet:n,forceRemove:r})},be=!(!O||function(){var e,t=Object(r.a)(ie);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n instanceof b.c&&""===n.value)return!0;if(n instanceof b.f&&"tmp:none"===n.node.value)return!0}}catch(a){t.e(a)}finally{t.f()}return!1}()||p.readOnly&&!0===p.readOnly||p.displayPriority&&p.displayPriority>1)&&(p.objectType==b.d.ResExt||!p.maxCount||ie.length<p.maxCount),je=(!p.minCount||p.minCount<ie.length)&&!p.readOnly&&O,fe=function(e,t,n){var r=C(ie,t,e);T(r)},he=Object(u.useCallback)((function(e){var t,n=Object(r.a)(ie);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a instanceof b.f&&(a.qname===e||a.uri===e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}),[ie]),Oe=!0;Object(u.useEffect)((function(){if(ie.length){var e=ie[0];e instanceof b.b&&"tmp:uri"!==e.uri&&"tmp:none"!==e.uri&&(Oe=!1)}var t=s.getUnitializedValues(p);if(t&&t.length)if(p.minCount&&t.length<p.minCount){var n=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var n;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(p,s,G,B,ce.toString(),N);case 2:n=e.sent,y?y.noHisto():v?v.noHisto():s.noHisto(),T(t.concat(Array.isArray(n)?n:[n]));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}else T(t);else if(p.objectType==b.d.ResInList||p.objectType==b.d.LitInList||p.objectType==b.d.Internal||p.displayPriority&&0!==p.displayPriority&&(1!==p.displayPriority||!ie.length&&!j)||!(p.minCount&&ie.length<p.minCount)&&ie.length&&Oe||p.maxCount&&!(p.maxCount>=ie.length)){if(p.objectType==b.d.Internal&&p.minCount&&ie.length<p.minCount){var r=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(p,s,G,B,ce.toString(),N);case 2:t=e.sent,y?y.noHisto():v?v.noHisto():s.noHisto(),T((function(e){return(Array.isArray(t)?t:[t]).concat(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()}else if(p.objectType!=b.d.ResInList&&p.objectType!=b.d.LitInList&&p.displayPriority&&1===p.displayPriority&&1===ie.length&&!j);else if(!ie.length&&(p.objectType==b.d.ResInList||p.objectType==b.d.LitInList)){var o=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(p,s,G,B,ce.toString(),N);case 2:t=e.sent,y?y.noHisto():v?v.noHisto():s.noHisto(),T(Array.isArray(t)?t:[t]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();o()}}else if(Oe){var c=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(p,s,G,B,ce.toString(),N);case 2:t=e.sent,y?y.noHisto():v?v.noHisto():s.noHisto(),T((function(e){return e.concat(Array.isArray(t)?t:[t])}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c()}else{var u=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(p,s,G,B,ce.toString(),N);case 2:t=e.sent,y?y.noHisto():v?v.noHisto():s.noHisto(),T((function(e){return(Array.isArray(t)?t:[t]).concat(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();u()}}),[s,ie,j]);var ve=p.objectType===b.d.Internal,ge=ie.some((function(e){return!((t=e)instanceof b.f?"tmp:uri"===t.uri||"tmp:none"===t.uri:t instanceof b.c&&""===t.value)||function(e){return!!(e instanceof b.c&&b.h[y?y.qname:s.qname])&&Object.keys(b.h[y?y.qname:s.qname]).some((function(t){return t.endsWith(";"+e.id)}))}(e);var t}));Object(u.useEffect)((function(){I&&I("unset",!ge)}),[ge]);var ye=!p.displayPriority||0===p.displayPriority||1===p.displayPriority&&(j||ie.length>1||ge)||2===p.displayPriority&&(ie.length>=1||ge),me=Object(u.useRef)(null),xe=Object(h.e)(k.q),we=Object(o.a)(xe,2),Pe=we[0];we[1];Object(u.useEffect)((function(){var e;(null===p||void 0===p||null===(e=p.group)||void 0===e?void 0:e.value)!==Pe&&null!==me&&void 0!==me&&me.current&&me.current.scrollTo({top:0,left:0,behavior:"smooth"})}),[Pe]);var Se=ie.length>0&&ie[0]instanceof b.f&&p.objectType==b.d.ResExt&&"tmp:uri"===ie[0].uri,ke=function(e){return e?e[0].toUpperCase()+e.substring(1):e},Le=p.allowPushToTopLevelLabel,Ie=Object(h.f)(Object(k.f)({checkUnique:p.uniqueValueAmongSiblings,siblingsAtom:w?(v||s).getAtomForProperty(w):k.c,propertyPath:p.path.sparqlString})),Ne=Object(u.useMemo)((function(){return function(e,t,n){if(e instanceof b.f||p.objectType==b.d.ResInList||p.objectType==b.d.LitInList){if(p.objectType==b.d.ResExt)return Object(E.jsx)(Z,Object(c.a)(Object(c.a)({subject:s,property:p,extRes:e,canDel:je&&(t>0||!(e instanceof b.c)&&"tmp:uri"!==e.uri),onChange:fe,idx:t,exists:he,editable:O},v?{owner:v}:{}),{},{title:ke(W),updateEntityState:de,shape:x,config:N}),e.id+":"+t);if(e instanceof b.c||e instanceof b.f){ve=!1;var r=0==t&&!p.minCount||t>0&&t==n-1;return Object(E.jsx)(ee,{canSelectNone:r,subject:s,property:p,res:e,selectIdx:t,canDel:je&&e!=b.i,editable:O,create:be?Object(E.jsx)(R,{subject:s,property:p,embedded:d,newVal:Number(ce),shape:x,config:N}):void 0,updateEntityState:de},"select_"+e.id+"_"+t)}}else{if(e instanceof b.g)return ve=!0,Object(E.jsx)(Y,Object(c.a)(Object(c.a)(Object(c.a)({subject:s,property:p,subNode:e,canDel:je&&O},j?{force:j}:{}),{},{editable:O},y?{topEntity:y}:{topEntity:s}),{},{updateEntityState:de,shape:x,config:N}),e.id);if(e instanceof b.c){ve=!1;var a=1===ie.filter((function(t){return t instanceof b.c&&t.language===e.language})).length;return Object(E.jsx)(J,{subject:s,property:p,lit:e,canDel:je,isUniqueLang:a,isUniqueValueAmongSiblings:Ie,create:Object(E.jsx)(R,{disable:!be||!(e&&""!==e.value),subject:s,property:p,embedded:d,newVal:Number(ce),shape:x,config:N}),editable:O,topEntity:y,updateEntityState:de,config:N},e.id)}}}}),void 0);return Object(E.jsxs)(l.a.Fragment,{children:[Object(E.jsxs)("div",{className:"ValueList "+(p.maxCount&&p.maxCount<ie.length?"maxCount":"")+(ge?"":"empty")+(p.objectType===b.d.ResExt?" ResExt":"")+(d?"":" main")+(Le?" canPush":""),"data-priority":p.displayPriority?p.displayPriority:0,role:"main",style:Object(c.a)({display:"flex",flexWrap:"wrap"},(ie.length>1&&Oe&&(p.path.sparqlString,f.f("prefLabel").value),{})),children:[ye&&(!p.in||p.in.length>1)&&Object(E.jsxs)("label",{className:"propLabel","data-prop":p.qname,"data-type":p.objectType,"data-priority":p.displayPriority,children:[ke(W),z&&p.objectType===b.d.ResExt&&Object(E.jsx)(g.a,{title:z,children:Object(E.jsx)(m.e,{className:"help label"})})]}),Se&&Object(E.jsx)("div",{style:{width:"100%"},children:Ne(ie[0],0,ie.length)}),Object(E.jsx)("div",{ref:me,className:d||p.objectType===b.d.Internal?"":"overFauto",style:Object(c.a)({width:"100%"},(null===p||void 0===p||null===(n=p.group)||void 0===n?void 0:n.value)!==Pe?{paddingRight:"0.5rem"}:{}),children:ie.map((function(e,t){if(!Se||t>0)return Ne(e,t,ie.length)}))})]}),be&&ve&&Object(E.jsx)(R,{subject:s,property:p,embedded:d,newVal:Number(ce),shape:x,config:N})]})}}).call(this,n(188).setImmediate)},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s}));n(3),n(22),n(10),n(45),n(4),n(0);var r=n(7),a=(n(41),n(25),n(6)),i=(n(174),n(53),n(51),n(55),n(17),n(364));n(438),n(424),n(13),n(48),n(1),n(61)("rde:entity:selector");n(61)("rde:entity:selector");var o;Object(i.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));!function(e){e[e.Error=0]="Error",e[e.Saved=1]="Saved",e[e.NeedsSaving=2]="NeedsSaving",e[e.Loading=3]="Loading",e[e.NotLoaded=4]="NotLoaded"}(o||(o={}));var c=Object(a.b)({key:"entities",default:[]}),s=Object(a.b)({key:"defaultEntityLabelAtom",default:[new r.c("...","en")]})},294:function(e,t){},361:function(e,t,n){"use strict";n.r(t),n.d(t,"EntityEditContainer",(function(){return ae})),n.d(t,"EntityEditContainerMayUpdate",(function(){return ne})),n.d(t,"NewEntityContainer",(function(){return ue})),n.d(t,"EntityCreationContainer",(function(){return xe})),n.d(t,"EntityCreationContainerRoute",(function(){return me})),n.d(t,"EntityShapeChooserContainer",(function(){return Pe}));var r=n(10),a=n(22),i=n(45),o=n(8),c=n(3),s=n(4),u=n(13),l=n(0),p=n.n(l),d=n(63),b=n(146),j=n(70),f=n(28),h=n(102),O=n(25),v=n(6),g=n(7),y=n(87),m=n(17),x=n(24),w=n(61)("rde:rdf:io"),P=new Headers;P.set("Accept","text/turtle");var S=new Headers;S.set("Content-Type","text/turtle");var k={};function L(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{val:!1},o=Object(l.useState)({status:"idle",error:void 0}),p=Object(s.a)(o,2),f=p[0],h=p[1],O=Object(l.useState)(g.g.createEmpty()),P=Object(s.a)(O,2),S=P[0],k=P[1],L=Object(v.e)(m.u),I=Object(s.a)(L,2),N=(I[0],I[1]),E=Object(v.e)(x.c),q=Object(s.a)(E,2),C=q[0],V=q[1],F=Object(v.e)(m.n),T=Object(s.a)(F,2),A=T[0],R=T[1],D=Object(l.useState)(localStorage.getItem("BLMPidToken")),Q=Object(s.a)(D,2),U=Q[0],M=(Q[1],Object(v.e)(m.k)),B=Object(s.a)(M,2),H=B[0],_=(B[1],Object(l.useState)(e)),G=Object(s.a)(_,2),W=G[0],z=G[1],K=Object(v.e)(m.l),X=Object(s.a)(K,2),$=X[0],J=X[1],Y=Object(v.e)(m.p),Z=Object(s.a)(Y,2),ee=(Z[0],Z[1]);Object(l.useEffect)((function(){return function(){r.val=!0}}),[]),Object(l.useEffect)((function(){r.val||W!=e&&te()}));var te=function(){z(e),k(g.g.createEmpty()),h({status:"idle",error:void 0})};Object(l.useEffect)((function(){if(!r.val){var o=C.findIndex((function(t){return t.subjectQname===e||"tmp:user"==e&&t.subjectQname===H}));if($===e&&!C[o].subject||W===e&&(-1===o||C[o]&&!C[o].subject))("tmp:user"!=e||U)&&function(e){l.apply(this,arguments)}(e);else{if(r.val)return;h({status:"fetched",error:void 0});var s=C[o]?C[o].subject:null;if(r.val)return;if(s&&k(s),r.val)return;N(!0)}}function l(){return l=Object(i.a)(Object(a.a)().mark((function e(r){var i,o,s,l,p,f,O,v,g,m,P,L,I,E,q,F,T,D,Q;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({status:"fetching",error:void 0}),w("fetching",S,t,r,C),e.next=4,n.getUserLocalEntities();case 4:if(f=e.sent,$!==r&&t&&void 0!==f[r]){if(i=window.confirm("found previous local edits for this resource, load them?"),O=d.a(),i)try{b.a(f[r].ttl,O,j.a.defaultGraphURI,"text/turtle"),s=f[r].etag,p=f[r].needsSaving,w("nS:",p)}catch(a){w(a),w(f[r]),window.alert("could not load local data, fetching remote version"),i=!1,delete f[r]}else b.a("",O,j.a.defaultGraphURI,"text/turtle");l={store:O,etag:s}}if(v=n.prefixMap.uriFromQname(r),g=d.c(v),e.prev=8,i){e.next=14;break}return e.next=12,n.getDocument(g);case 12:l=e.sent,p=!1;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),o=!0;case 19:if(m=C,A){e.next=25;break}return e.next=23,n.getUserMenuState();case 23:if(P=e.sent)for(m=[],L=0,I=Object.keys(P);L<I.length;L++)E=I[L],m.push({subjectQname:E,subject:null,shapeQname:P[E].shapeQname,subjectLabelState:x.b,state:x.a.NotLoaded,preloadedLabel:P[E].preloadedLabel,etag:P[E].etag,loadedUnsavedFromLocalStorage:!0});case 25:if(e.prev=25,!o){e.next=28;break}throw Error("not found");case 28:return e.next=30,n.getDocument(g);case 30:if(q=e.sent,F=q.subject,s=q.etag,l){e.next=37;break}return void(e.next=36);case 36:l=e.sent;case 37:T=r,v,D=m.findIndex((function(e){return e.subjectQname===T})),Q=Object(u.a)(m),-1===D&&(Q.push({subjectQname:T,state:x.a.Loading,shapeQname:t,subject:null,subjectLabelState:x.b,etag:s,loadedUnsavedFromLocalStorage:!1}),D=Q.length-1),D>=0&&Q[D]&&!Q[D].subject&&(Q[D]=Object(c.a)(Object(c.a)({},Q[D]),{},{subject:F,state:x.a.Saved,subjectLabelState:F.getAtomForProperty(y.d.uri),preloadedLabel:"",etag:s},s?{loadedUnsavedFromLocalStorage:p}:{}),V(Q)),h({status:"fetched",error:void 0}),k(F),N(!0),$&&J(""),e.next=54;break;case 48:e.prev=48,e.t1=e.catch(25),w("e:",e.t1.message,e.t1),ee(!1),h({status:"error",error:"not found"!==e.t1.message?"error fetching entity":"not found"}),!C.length&&m.length&&V(m);case 54:A||R(!0);case 55:case"end":return e.stop()}}),e,null,[[8,16],[25,48]])}))),l.apply(this,arguments)}}),[W,t,U,H,$]);var ne=e===W?{entityLoadingState:f,entity:S,reset:te}:{entityLoadingState:{status:"loading",error:void 0},entity:g.g.createEmpty(),reset:te};return ne}var I=n(179),N=n.n(I),E=n(138),q=n(48),C=n(41),V=n(428),F=n(429),T=n(430),A=n(431),R=n(432),D=n(153),Q=n.n(D),U=n(182),M=n(38),B=n.n(M),H=(n(355),n(356),n(1)),_=n(61)("rde:entity:propertygroup"),G=new B.a.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function W(e){var t=e.pos,n=e.icon,r=e.setCoords,a=Object(l.useState)(t),i=Object(s.a)(a,2),o=i[0],c=i[1],u=Object(l.useRef)(null),p=Object(l.useMemo)((function(){return{dragend:function(){var e=u.current;null!=e&&(c(e.getLatLng()),r(e.getLatLng()))}}}),[]);return Object(l.useEffect)((function(){!u.current||u.current.lat==t.lat&&u.current.lng==t.lng||u.current.setLatLng(t)})),Object(H.jsx)(V.a,{draggable:!0,eventHandlers:p,position:o,icon:n,ref:u})}var z=function(e){var t=e.coords,n=(e.redraw,e.setCoords),r=e.config,a=Object(F.a)({click:function(e){_("click:",e),n(e.latlng)}});return Object(l.useEffect)((function(){a.setView(t,a.getZoom())})),Object(l.useEffect)((function(){var e=r.googleMapsAPIKey?new U.b({apiKey:r.googleMapsAPIKey}):new U.c,t=Object(U.a)({provider:e,showPopUp:!1,showMarker:!1});a.addControl(t),a.on("geosearch/showlocation",(function(e){var t=document.querySelector(".leaflet-container");t&&t.click()})),a.removeControl(t)}),[]),null},K=function(e){var t=e.group,n=e.subject,r=e.onGroupOpen,a=e.shape,i=(e.GISatoms,e.config),o=Object(v.e)(m.s),c=Object(s.a)(o,1)[0],u=q.a(t.prefLabels,c),p=Object(l.useState)(!1),d=Object(s.a)(p,2),b=d[0],j=d[1],f=[],h=[],y=Object.keys(g.h[n.qname]?g.h[n.qname]:{}),x=!1;t.properties.map((function(e){var t;(!x&&y.some((function(t){return t.includes(e.qname)}))||null!==(t=e.targetShape)&&void 0!==t&&t.properties.some((function(e){return y.some((function(t){return t.includes(e.qname)}))})))&&(x=!0),e.displayPriority&&e.displayPriority>=1?f.push(e):h.push(e)}));var w,P=f.length>0,S=Object(v.e)(m.q),k=Object(s.a)(S,2),L=k[0],I=k[1],N=Object(v.e)(m.r),V=Object(s.a)(N,2),F=V[0],D=V[1],U=Object(v.e)(i.latProp?n.getAtomForProperty(i.latProp.uri):m.c),M=Object(s.a)(U,2),_=M[0],K=M[1],X=Object(v.e)(i.lngProp?n.getAtomForProperty(i.lngProp.uri):m.c),$=Object(s.a)(X,2),J=$[0],Y=$[1],Z=Object(l.useState)(!1),ee=Object(s.a)(Z,2),te=ee[0],ne=ee[1],re=5,ae=!1;_.length&&J.length&&""!=_[0].value&&""!=_[0].value?w=new B.a.LatLng(Number(_[0].value),Number(J[0].value)):(ae=!0,w=new B.a.LatLng(30,0),re=2),Object(l.useEffect)((function(){ne(!0)}),[J,_]);var ie=function(e){ne(!1),isNaN(e.lat)||(_.length>0&&_[0]instanceof g.c&&K([_[0].copyWithUpdatedValue(""+e.lat)]),0==_.length&&K([new g.c(""+e.lat)])),isNaN(e.lng)||(J.length>0&&J[0]instanceof g.c&&Y([J[0].copyWithUpdatedValue(""+e.lng)]),0==J.length&&Y([new g.c(""+e.lat)]))};return Object(H.jsx)("div",{role:"main",className:"group "+(x?"hasError":""),id:t.qname,style:{scrollMargin:"90px"},children:Object(H.jsx)("section",{className:"album",children:Object(H.jsx)("div",{className:"container col-lg-6 col-md-6 col-sm-12",style:{border:"dashed 1px none"},children:Object(H.jsxs)("div",{className:"row card my-2 pb-3"+(L===t.qname?" group-edit":"")+" show-displayPriority-"+b,onClick:function(e){r&&F!==t.qname&&r(e,F),I(t.qname),D(t.qname)},children:[Object(H.jsxs)("p",{className:"",children:[u,x&&Object(H.jsx)(C.d,{})]}),Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)("div",{className:t.properties.length<=1?"hidePropLabel":"",style:{fontSize:0},children:[h.map((function(e,t){return Object(H.jsx)(E.a,{property:e,subject:n,editable:!0!==e.readOnly,shape:a,config:i},t)})),f.map((function(e,t){return Object(H.jsx)(E.a,{property:e,subject:n,force:b,editable:!0!==e.readOnly,shape:a,config:i},t)})),i.gisPropertyGroup&&t.uri===i.gisPropertyGroup.uri&&F===t.qname&&w&&Object(H.jsx)("div",{style:{position:"relative",overflow:"hidden",marginTop:"16px"},children:Object(H.jsxs)(T.a,{style:{width:"100%",height:"400px"},zoom:re,center:w,children:[Object(H.jsxs)(A.a,{position:"topright",children:[i.googleMapsAPIKey&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(A.a.BaseLayer,{checked:!0,name:"Satellite+Roadmap",children:Object(H.jsx)(Q.a,{apiKey:i.googleMapsAPIKey,type:"hybrid"})}),Object(H.jsx)(A.a.BaseLayer,{name:"Satellite",children:Object(H.jsx)(Q.a,{apiKey:i.googleMapsAPIKey,type:"satellite"})}),Object(H.jsx)(A.a.BaseLayer,{name:"Roadmap",children:Object(H.jsx)(Q.a,{apiKey:i.googleMapsAPIKey,type:"roadmap"})}),Object(H.jsx)(A.a.BaseLayer,{name:"Terrain",children:Object(H.jsx)(Q.a,{apiKey:i.googleMapsAPIKey,type:"terrain"})})]}),!i.googleMapsAPIKey&&Object(H.jsx)(A.a.BaseLayer,{checked:!0,name:"OpenStreetMap",children:Object(H.jsx)(R.a,{url:"https://{s}.tile.iosb.fraunhofer.de/tiles/osmde/{z}/{x}/{y}.png"})})]}),!ae&&Object(H.jsx)(W,{pos:w,icon:G,setCoords:ie}),Object(H.jsx)(z,{coords:w,redraw:te,setCoords:ie,config:i})]})}),P&&Object(H.jsx)("span",{className:"toggle-btn  btn btn-rouge my-4",onClick:function(){j(!b)},children:Object(H.jsx)(H.Fragment,{children:O.a.t("general.toggle",{show:b?O.a.t("general.hide"):O.a.t("general.show")})})})]})})]})})})})},X=n(18),$=n(51),J=n(246),Y=n(178),Z=n.n(Y),ee=n(53),te=n(61)("rde:entity:edit");function ne(e){var t=e.match.params.shapeQname,n=e.match.params.entityQname,r=e.match.params.subjectQname,a=e.match.params.propertyQname,i=e.match.params.index,o=e.match.params.subnodeQname,u=Object(v.e)(x.c),p=Object(s.a)(u,2),d=p[0],b=(p[1],Object(v.d)()),j=Object(l.useState)(null),f=Object(s.a)(j,2),h=f[0],O=f[1],g=Z.a.parse(e.location.search,{decode:!1}).copy;if(Object(l.useEffect)((function(){var e,t=d.findIndex((function(e){return e.subjectQname===r}));if(-1!==t)if(o){var n=Object(ee.b)(X.h.uriFromQname(r),X.h.uriFromQname(o));if(n.length>1&&t>=0){var a,i=null===(a=d[t].subject)||void 0===a?void 0:a.getAtomForProperty(n[1]);if(!i)return void O(null);if(e=b.getLoadable(i).contents,Array.isArray(e)){if(!(e=e.filter((function(e){return e.qname===o}))).length)throw new Error("subnode not found: "+o);e=e[0]}O(e)}}else e=d[t].subject,O(e)}),[]),h&&a&&n&&i){Object(c.a)(Object(c.a)({},e),{},{copy:g});return Object(H.jsx)(re,Object(c.a)({subject:h,propertyQname:a,objectQname:n,index:Number(i),copy:g},e))}return null!=h?Object(H.jsx)($.a,{to:"/edit/"+n+"/"+t}):Object(H.jsx)("div",{})}function re(e,t){var n,r=e.match.params.shapeQname,a=e.subject.getAtomForProperty(X.h.uriFromQname(e.propertyQname)),i=Object(v.e)(a),p=Object(s.a)(i,2),d=p[0],b=p[1],j=Object(v.e)(x.c),f=Object(s.a)(j,2),h=f[0],O=(f[1],h.findIndex((function(t){return t.subjectQname===e.objectQname}))),w=null===(n=h[O])||void 0===n?void 0:n.subject,P=null;e.copy&&"string"===typeof e.copy&&(P=e.copy.split(";").reduce((function(e,t){var n=t.split(","),r=n.slice(1).map((function(e){var t=decodeURIComponent(e).split("@");return new g.c(t[0].replace(/(^")|("$)/g,""),t[1],y.e)}));return Object(c.a)(Object(c.a)({},e),{},Object(o.a)({},n[0],r))}),{}));var S=Object(v.e)(Object(m.o)({list:w&&P?Object.keys(P).map((function(e){return{property:e,atom:w.getAtomForProperty(t.prefixMap.uriFromQname(e))}})):void 0})),k=Object(s.a)(S,2),L=(k[0],k[1]);return te("LIST:",d,a,e.copy,P),Object(l.useEffect)((function(){P&&setTimeout((function(){if(P){for(var e=[],t=0,n=Object.keys(P);t<n.length;t++){var r=n[t];e.push({k:r,val:P[r]})}L(e)}}),1150);var t,n,r,a=new g.b(X.h.uriFromQname(e.objectQname),{},{}),i=(t=d,n=e.index,r=a,[].concat(Object(u.a)(t.slice(0,n)),[r],Object(u.a)(t.slice(n+1))));b(i)}),[]),Object(H.jsx)($.a,{to:"/edit/"+e.objectQname+"/"+r})}var ae=function(e,t){var n,b,y,P,S,I,E=e.match.params.shapeQname,C=e.match.params.entityQname,V=Object(v.e)(x.c),F=Object(s.a)(V,2),T=F[0],A=(F[1],Object(v.e)(m.s)),R=Object(s.a)(A,1)[0],D=Object(v.e)(m.q),Q=Object(s.a)(D,2),U=(Q[0],Q[1]),M=Object(v.e)(m.r),B=Object(s.a)(M,2),_=B[0],G=B[1],W=Object(v.e)(m.w),z=Object(s.a)(W,2),$=z[0],Y=z[1],Z=Object(v.e)(m.k),ne=Object(s.a)(Z,2),re=ne[0],ae=(ne[1],Object(v.e)(m.v)),ie=Object(s.a)(ae,2),oe=ie[0],ce=ie[1],se=T.filter((function(e){return e.subjectQname===C||e.subjectQname===re&&"tmp:user"===C})),ue=t.iconFromEntity(se.length?se[0]:null),le=function(e,t,n){var r=Object(l.useState)({status:"idle",error:void 0}),o=Object(s.a)(r,2),p=o[0],b=o[1],j=Object(l.useState)(),f=Object(s.a)(j,2),h=f[0],O=f[1],g=Object(l.useState)(e),y=Object(s.a)(g,2),m=y[0],P=y[1],S=Object(v.e)(x.c),L=Object(s.a)(S,2),I=L[0],N=L[1];Object(l.useEffect)((function(){m!=e&&E()}));var E=function(){P(e),O(void 0),b({status:"idle",error:void 0})};return Object(l.useEffect)((function(){if(!h||e!==m||"fetched"!==p.status){if(e in k)return b({status:"fetched",error:void 0}),void O(k[e]);m===e&&function(e){r.apply(this,arguments)}(e)}function r(){return r=Object(i.a)(Object(a.a)().mark((function e(r){var i,o,s,l,p;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b({status:"fetching",error:void 0}),i=d.c(n.prefixMap.uriFromQname(r)),o=n.getShapesDocument(i),e.prev=3,e.next=6,o;case 6:s=e.sent,k[r]=s,O(s),t&&"tmp:uri"!==t&&-1!==(l=I.findIndex((function(e){return e.subjectQname===t})))&&((p=Object(u.a)(I))[l]=Object(c.a)(Object(c.a)({},p[l]),{},{shapeQname:s.qname}),N(p)),b({status:"fetched",error:void 0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),w("shape error:",e.t0),b({status:"error",error:"error fetching shape or ontology"});case 17:case"end":return e.stop()}}),e,null,[[3,13]])}))),r.apply(this,arguments)}}),[m,I]),e===m&&h&&e==h.qname?{loadingState:p,shape:h,reset:E}:{loadingState:{status:"loading",error:void 0},shape:void 0,reset:E}}(E,C,t),pe=le.loadingState,de=le.shape,be=null===de||void 0===de?void 0:de.groups.reduce((function(e,t){var n=t.properties.filter((function(e){return e.allowPushToTopLevelLabel})).map((function(e){if(se&&se[0]&&se[0].subject&&e.path)return se[0].subject.getAtomForProperty(e.path.sparqlString)})).filter((function(e){return void 0!=e})),r=t.properties.reduce((function(e,t){var n,r=null===(n=t.targetShape)||void 0===n?void 0:n.properties.filter((function(e){return e.allowPushToTopLevelLabel})).map((function(e){var t;return null===(t=e.path)||void 0===t?void 0:t.sparqlString}));return null!==r&&void 0!==r&&r.length&&se&&se[0]&&se[0].subject&&t.path?Object(c.a)(Object(c.a)({},e),{},Object(o.a)({},t.qname,{atom:se[0].subject.getAtomForProperty(t.path.sparqlString),allowPush:r})):e}),{});return null!==n&&void 0!==n&&n.length||Object.keys(r).length?Object(c.a)(Object(c.a)({},e),{},Object(o.a)({},t.qname,{props:n,subprops:r})):Object(c.a)({},e)}),{}),je=Object(v.f)(be?Object(m.j)({canPushPrefLabelGroups:be}):m.d),fe=null===(n=se[0])||void 0===n||null===(b=n.subject)||void 0===b?void 0:b.getAtomForProperty(X.f("prefLabel").value);fe||(fe=m.c);var he=Object(v.e)(fe),Oe=Object(s.a)(he,2),ve=Oe[0],ge=Oe[1],ye=null===(y=se[0])||void 0===y||null===(P=y.subject)||void 0===P?void 0:P.getAtomForProperty(X.f("altLabel").value);ye||(ye=m.c);var me=Object(v.f)(ye);Object(l.useEffect)((function(){T.map((function(e,t){e.subjectQname!==C&&(e.subjectQname!==re||"tmp:user"!==C)||oe==t||ce(t)}))}),[T,re]);var xe=0;Object(l.useEffect)((function(){if("tmp:user"!==C||re){var e=-1,t=X.h.uriFromQname("tmp:user"===C?re:C);xe&&clearInterval(xe),xe=window.setInterval((function(){ee.c[t]&&(ee.c[t].some((function(e){return e["tmp:allValuesLoaded"]}))?clearInterval(xe):e===ee.c[t].length?(clearInterval(xe),ee.c[t].push({"tmp:allValuesLoaded":!0}),Y(Object(c.a)(Object(c.a)({},$),{},Object(o.a)({},t,m.g)))):e=ee.c[t].length)}),350)}}),[T,oe,re,C]);var we=Object(v.e)(m.x),Pe=Object(s.a)(we,2),Se=Pe[0],ke=(Pe[1],Object(l.useCallback)((function(e){return new Promise(function(){var n=Object(i.a)(Object(a.a)().mark((function n(r){var o,c,s,u;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:[x.a.NeedsSaving,x.a.Error].includes(e[0].state)&&(s=new f.a(j.a.defaultGraphURI),u=new j.a,X.h.setDefaultPrefixes(u),null===(o=e[0])||void 0===o||null===(c=o.subject)||void 0===c||c.graph.addNewValuestoStore(u),h.a(s,u,void 0,"text/turtle",function(){var n=Object(i.a)(Object(a.a)().mark((function n(i,o){var c,s;return Object(a.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i&&o){n.next=3;break}throw te(i,u),"error when serializing";case 3:s=null===(c=e[0])||void 0===c?void 0:c.shapeQname,t.setUserLocalEntity(e[0].subjectQname,s,o,!1,Se,e[0].etag,e[0].state===x.a.NeedsSaving),r(!0);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[C,E,se])),Le=Object(l.useRef)(se);Object(l.useEffect)((function(){var e,t,n;null!==(e=Le.current)&&void 0!==e&&e.length&&null!==se&&void 0!==se&&se.length&&((null===(t=Le.current[0])||void 0===t?void 0:t.subjectQname)!=(null===(n=se[0])||void 0===n?void 0:n.subjectQname)&&ke(Le.current))})),Object(l.useEffect)((function(){return function(){var e=function(){var e=Object(i.a)(Object(a.a)().mark((function e(){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Le.current){e.next=4;break}return te("unmounting /edit",Le.current),e.next=4,ke(Le.current);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[]);var Ie=Object(l.useState)((function(){return function(e){}})),Ne=Object(s.a)(Ie,2),Ee=Ne[0],qe=Ne[1];Object(l.useEffect)((function(){var e,t=[],n=Object(r.a)(T);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.state!==x.a.Saved&&o.state!==x.a.NotLoaded&&t.push(o)}}catch(c){n.e(c)}finally{n.f()}t.length?(window.removeEventListener("beforeunload",Ee,!0),qe((function(){return function(){var e=Object(i.a)(Object(a.a)().mark((function e(n){var i,o,c;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(r.a)(t),e.prev=1,i.s();case 3:if((o=i.n()).done){e.next=9;break}return c=o.value,e.next=7,ke([c]);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i.e(e.t0);case 14:return e.prev=14,i.f(),e.finish(14);case 17:n.preventDefault(),n.returnValue="";case 19:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()}))):(window.removeEventListener("beforeunload",Ee,!0),qe((function(){return function(e){}})))}),[T]),Object(l.useEffect)((function(){window.addEventListener("beforeunload",Ee,!0)}),[Ee]);var Ce=L(C,E,t),Ve=Ce.entityLoadingState,Fe=Ce.entity;if("error"===pe.status||"error"===Ve.status)return Object(H.jsxs)("p",{className:"text-center text-muted",children:[Object(H.jsx)(N.a,{className:"icon mr-2"}),pe.error,Ve.error]});if("fetching"===pe.status||"fetching"===Ve.status||!Fe||Fe.isEmpty())return Object(H.jsx)(H.Fragment,{children:Object(H.jsx)("div",{children:Object(H.jsx)("div",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("types.loading")})})})});if(!de||!Fe)return Object(H.jsx)(H.Fragment,{children:Object(H.jsx)("div",{children:Object(H.jsx)("div",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("types.loading")})})})});var Te=q.a(de.targetClassPrefLabels,R),Ae=function(e,t){var n;if(je&&null!==(n=je[t])&&void 0!==n&&n.length){var a,i=Object(u.a)(ve),o=Object(r.a)(je[t]);try{var c=function(){var e=a.value;e instanceof g.c&&!i.some((function(t){return t instanceof g.c&&Object(g.k)(t.language,e.language)}))&&!me.some((function(t){return t instanceof g.c&&Object(g.k)(t.language,e.language)}))&&i.push(e)};for(o.s();!(a=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}i.length!=ve.length&&ge(i)}U(""),G(""),e.stopPropagation()},Re=t.getPreviewLink(Fe.node);return Object(H.jsxs)(p.a.Fragment,{children:[Object(H.jsx)("div",{role:"main",className:"pt-4",style:{textAlign:"center"},children:Object(H.jsxs)("div",Object(c.a)(Object(c.a)({className:"header "+(null===ue||void 0===ue?void 0:ue.toLowerCase())},ue?{}:{"data-shape":de.qname}),{},{children:[Object(H.jsx)("div",{className:"shape-icon"}),Object(H.jsxs)("div",{children:[Object(H.jsx)("h1",{children:Te}),Object(H.jsx)("span",{children:Fe.qname}),Re&&Object(H.jsx)("div",{className:"buda-link",children:Object(H.jsx)("a",Object(c.a)(Object(c.a)({className:"btn-rouge"+(null!==(S=se[0])&&void 0!==S&&S.etag?"":" disabled"),target:"_blank",rel:"noreferrer"},null!==(I=se[0])&&void 0!==I&&I.etag?{href:Re}:{title:O.a.t("error.preview")}),{},{children:Object(H.jsx)(H.Fragment,{children:O.a.t("general.preview")})}))})]})]}))}),Object(H.jsxs)("div",{role:"navigation",className:"innerNav",children:[Object(H.jsx)("p",{className:"text-uppercase small my-2",children:Object(H.jsx)(H.Fragment,{children:O.a.t("home.nav")})}),de.groups.map((function(e,t){var n=q.a(e.prefLabels,R);return Object(H.jsx)(J.a,{to:"#"+e.qname,onClick:function(){G(e.qname),U(e.qname)},className:_===e.qname?"on":"",children:Object(H.jsx)("span",{children:n})},e.qname)}))]}),Object(H.jsx)("div",{children:de.groups.map((function(e,n){return Object(H.jsxs)(H.Fragment,{children:[_===e.qname&&Object(H.jsx)("div",{className:"group-edit-BG",onClick:function(t){return Ae(t,e.qname)}}),Object(H.jsx)(K,{group:e,subject:Fe,onGroupOpen:Ae,shape:de,config:t},e.uri)]})}))})]})},ie=n(55),oe=n(439),ce=n(123),se=n(142);n(61)("rde:entity:newentity");var ue=function(e,t){var n=Object(v.e)(m.s),r=Object(s.a)(n,1)[0],a=Object(l.useState)(""),i=Object(s.a)(a,2),o=i[0],u=i[1],p=Object(v.e)(m.b),d=Object(s.a)(p,2),b=d[0],j=(d[1],Object(v.e)(m.x)),f=Object(s.a)(j,2),h=(f[0],f[1],!b);return Object(H.jsxs)("div",{className:"new-fix",children:[Object(H.jsxs)("div",{children:[Object(H.jsx)("b",{children:"New entity:"}),Object(H.jsxs)("span",{children:[Object(H.jsx)(ce.a,Object(c.a)(Object(c.a)({},h?{disabled:!0}:{}),{},{select:!0,helperText:"List of all possible shapes",id:"shapeSelec",className:"shapeSelector",value:t.possibleShapeRefs[0].qname,style:{marginTop:"3px",marginLeft:"10px"},children:t.possibleShapeRefs.map((function(e,t){return Object(H.jsx)(se.a,{value:e.qname,style:{padding:0},children:Object(H.jsx)(ie.a,{to:"/new/"+e.qname,className:"popLink",children:q.a(e.prefLabels,r)})},e.qname)}))})),h&&""===b&&Object(H.jsx)("span",{className:"pl-2",style:{fontStyle:"italic",fontWeight:500,color:"#d73449",fontSize:14},children:Object(H.jsx)(oe.a,{i18nKey:"error.prefix",components:{res:Object(H.jsx)(ie.a,{className:"profile-link",to:"/profile"})}})})]})]}),Object(H.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[Object(H.jsxs)("div",{style:{marginRight:"10px"},children:[Object(H.jsx)("b",{children:"Load entity:"})," "]}),Object(H.jsx)("div",{children:Object(H.jsx)(ce.a,{style:{width:"100%"},value:o,InputLabelProps:{shrink:!0},onChange:function(e){return u(e.target.value)},helperText:"select an entity to load here by its RID",onKeyDown:function(t){"Enter"===t.key&&e.history.push("/edit/bdr:"+o.replace(/^bdr:/,"").toUpperCase())}})}),Object(H.jsx)("div",{children:Object(H.jsx)(ie.a,{to:"/edit/bdr:"+o.replace(/^bdr:/,"").toUpperCase(),className:"btn btn-sm btn-outline-primary py-3 ml-2 lookup btn-rouge "+(o?"":"disabled"),style:{boxShadow:"none",alignSelf:"center",marginBottom:"15px"},children:Object(H.jsx)(H.Fragment,{children:O.a.t("search.open")})})})]})]})},le=n(437),pe=n(441),de=n(436),be=n(434),je=n(435),fe=n(433),he=n(61)("rde:entity:entitycreation");function Oe(e){var t,n=p.a.useState(e.open),r=Object(s.a)(n,2),a=r[0],i=r[1],o=null===(t=e.shaped.split(":")[1])||void 0===t?void 0:t.replace(/Shape$/,""),c=Object(l.useState)(!1),u=Object(s.a)(c,2),d=u[0],b=u[1],j=Object(l.useState)(!1),f=Object(s.a)(j,2),h=f[0],O=f[1];he("422:",e);return d?Object(H.jsx)($.a,{to:e.newUrl}):h?Object(H.jsx)($.a,{to:e.editUrl}):Object(H.jsx)("div",{children:Object(H.jsxs)(pe.a,{open:a,children:[Object(H.jsxs)(fe.a,{children:[o," ",e.named," has already been created"]}),Object(H.jsx)(be.a,{children:Object(H.jsxs)(je.a,{children:["Do you want to use it, or to create a new ",o," with another RID instead?"]})}),Object(H.jsxs)(de.a,{style:{justifyContent:"space-around"},children:[Object(H.jsxs)(le.a,{className:"btn-rouge",onClick:function(){O(!0),i(!1)},color:"primary",children:["Use\xa0",Object(H.jsx)("span",{style:{textTransform:"none"},children:e.named})]}),Object(H.jsxs)(le.a,{className:"btn-rouge",onClick:function(){b(!0),i(!1)},color:"primary",children:["Create\xa0",Object(H.jsx)("span",{style:{textTransform:"none"},children:o}),"\xa0with another RID"]})]}),Object(H.jsx)("br",{})]})})}var ve=n(61)("rde:entity:entitycreation");function ge(e,t){var n=e.match.params.subjectQname,r=e.match.params.shapeQname,a=e.match.params.propertyQname,i=e.match.params.index,o=e.match.params.subnodeQname,c=e.match.params.entityQname,u=Object(v.e)(m.x),p=Object(s.a)(u,2),b=(p[0],p[1],Object(v.e)(x.c)),j=Object(s.a)(b,2),f=(j[0],j[1],Object(v.e)(m.b)),h=Object(s.a)(f,2),g=h[0],y=(h[1],Object(v.e)(m.v)),w=Object(s.a)(y,2),P=(w[0],w[1],Object($.e)()),S={val:!1};if(Object(l.useEffect)((function(){return function(){S.val=!0}}),[]),""==g)return Object(H.jsx)($.a,{to:"/new"});var k=d.c(t.prefixMap.uriFromQname(r)),L=d.c(t.prefixMap.uriFromQname(c)),I=S.val?{entityLoadingState:{status:"idle",error:void 0},entity:null}:t.entityCreator(k,L,S),E=I.entityLoadingState,q=I.entity;if(ve("new:",E,q,c,null===q||void 0===q?void 0:q.qname,r),"422"===E.error&&q){var C=n&&a&&void 0!=i?"/edit/"+c+"/"+r+"/"+n+"/"+a+"/"+i+(o?"/"+o:"")+(e.copy?"?copy="+e.copy:""):"/edit/"+(c||q.qname)+"/"+r,V=P.location.pathname.replace(/\/named\/.*/,"")+P.location.search;return Object(H.jsx)(Oe,{open:!0,shaped:r,named:c,editUrl:C,newUrl:V})}return q?n&&a&&void 0!=i?Object(H.jsx)($.a,{to:"/edit/"+(c||q.qname)+"/"+r+"/"+n+"/"+a+"/"+i+(o?"/"+o:"")+(e.copy?"?copy="+e.copy:"")}):Object(H.jsx)($.a,{to:"/edit/"+(c||q.qname)+"/"+r}):"error"===E.status?Object(H.jsxs)("p",{className:"text-center text-muted",children:[Object(H.jsx)(N.a,{className:"icon mr-2"}),E.error]}):Object(H.jsx)(H.Fragment,{children:Object(H.jsx)("div",{children:Object(H.jsx)("div",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("types.creating")})})})})}function ye(e){var t=e.match.params.subjectQname,n=e.match.params.shapeQname,r=e.match.params.propertyQname,a=e.match.params.index,i=e.match.params.subnodeQname,o=e.match.params.entityQname,c=Object(v.e)(m.x),u=Object(s.a)(c,2),p=(u[0],u[1],Object(v.e)(x.c)),d=Object(s.a)(p,2),b=(d[0],d[1],Object(v.e)(m.b)),j=Object(s.a)(b,2),f=(j[0],j[1],Object(v.e)(m.v)),h=Object(s.a)(f,2),O=(h[0],h[1],{val:!1});return Object(l.useEffect)((function(){return function(){O.val=!0}}),[]),t&&r&&void 0!=a?Object(H.jsx)($.a,{to:"/edit/"+o+"/"+n+"/"+t+"/"+r+"/"+a+(i?"/"+i:"")+(e.copy?"?copy="+e.copy:"")}):Object(H.jsx)($.a,{to:"/edit/"+o+"/"+n})}function me(e){var t=Object(v.e)(x.c),n=Object(s.a)(t,2),r=n[0],a=(n[1],r.findIndex((function(t){return t.subjectQname===e.match.params.entityQname}))),i=r[a],o=Z.a.parse(e.location.search,{decode:!1}).copy;return i?Object(H.jsx)(ye,Object(c.a)(Object(c.a)({},e),{},{copy:o})):Object(H.jsx)(ge,Object(c.a)(Object(c.a)({},e),{},{copy:o}))}var xe=ge,we=n(61)("rde:entity:shape");var Pe=function(e,t){var n=Object(l.useState)(e.match.params.entityQname),r=Object(s.a)(n,2),a=r[0],i=r[1],o=Object(v.e)(m.s),p=Object(s.a)(o,1)[0],d=Object(v.e)(x.c),b=Object(s.a)(d,2),j=b[0],f=b[1],h={val:!1};Object(l.useEffect)((function(){return function(){h.val=!0}}),[]),Object(l.useEffect)((function(){h.val||e.match.params.entityQname&&i(e.match.params.entityQname)}),[e.match.params]);var g=j.find((function(e){return e.subjectQname===a}));if(g&&g.shapeQname){var y=g.shapeQname;return e.history.replace("/edit/"+a+"/"+y),Object(H.jsx)("div",{children:Object(H.jsx)("div",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("types.redirect")})})})}var w=L(a,"",t,h),P=w.entityLoadingState,S=w.entity;if(S){var k=t.possibleShapeRefsForEntity(S.node);if("fetching"===P.status)return Object(H.jsx)("div",{children:Object(H.jsx)("div",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("types.loading")})})});if("not found"===P.error)return Object(H.jsx)("div",{className:"error",children:Object(H.jsxs)("div",{children:[Object(H.jsx)("span",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("error.exist",{id:a})})}),Object(H.jsx)("br",{}),Object(H.jsx)(ie.a,{style:{fontWeight:700},to:"/new",children:Object(H.jsx)(H.Fragment,{children:O.a.t("error.redirect")})})]})});if(!k)return we("cannot find",S,P),Object(H.jsx)("div",{className:"error",children:Object(H.jsxs)("div",{children:[Object(H.jsx)("span",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("error.shape",{id:a})})}),Object(H.jsx)("br",{}),Object(H.jsx)(ie.a,{style:{fontWeight:700},to:"/new",children:Object(H.jsx)(H.Fragment,{children:O.a.t("error.redirect")})})]})});if(k.length>1){return Object(H.jsx)("div",{className:"centered-ctn",children:Object(H.jsxs)("div",{children:[Object(H.jsx)("b",{children:"Choose a shape:"}),Object(H.jsx)(ce.a,{select:!0,helperText:"List of all possible shapes",id:"shapeSelec",className:"shapeSelector",value:t.possibleShapeRefs[0].qname,style:{marginTop:"3px",marginLeft:"10px"},children:t.possibleShapeRefs.map((function(e,t){return Object(H.jsx)(se.a,{value:e.qname,style:{padding:0},children:Object(H.jsx)(ie.a,{to:"/edit/"+a+"/"+e.qname,className:"popLink",onClick:function(t){return function(e,t){var n=Object(u.a)(j);for(var r in n){var i=n[r];if(i.subjectQname===a){n[r]=Object(c.a)(Object(c.a)({},i),{},{shapeQname:t.qname}),f(n);break}}}(0,e)},children:q.a(e.prefLabels,p)})},e.qname)}))})]})})}return Object(H.jsx)($.a,{to:"/edit/"+a+"/"+k[0].qname})}return Object(H.jsx)(H.Fragment,{children:Object(H.jsx)("div",{children:Object(H.jsx)("div",{children:Object(H.jsx)(H.Fragment,{children:O.a.t("types.loading")})})})})}},41:function(e,t,n){"use strict";n.d(t,"g",(function(){return x})),n.d(t,"a",(function(){return w})),n.d(t,"h",(function(){return P}));var r=n(3),a=(n(0),n(141)),i=n(236),o=n.n(i),c=n(235),s=n.n(c),u=n(1),l=n(222),p=n.n(l);n.d(t,"d",(function(){return p.a}));var d=n(223),b=n.n(d);n.d(t,"b",(function(){return b.a}));var j=n(224),f=n.n(j);n.d(t,"i",(function(){return f.a}));var h=n(225),O=n.n(h);n.d(t,"c",(function(){return O.a}));var v=n(226),g=n.n(v);n.d(t,"f",(function(){return g.a}));var y=n(227),m=n.n(y);n.d(t,"e",(function(){return m.a}));var x=function(e){return Object(u.jsx)(a.Img,Object(r.a)({src:"/icons/Markdown-mark.svg"},e))},w=s.a,P=o.a},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(10),a=n(61)("rde:rdf:lang"),i=function(e,t){if(null==e)return"";Array.isArray(t)||(t=[t]);var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i in e)return e[i]}}catch(c){a.e(c)}finally{a.f()}var o=Object.values(e);return o[0]?o[0]:""},o={},c=function(e,t){var n;if(e in o)return o[e];var r=t.filter((function(t){return t.value===e}));return null!==(n=r)&&void 0!==n&&n.length?(r=r.concat(t.filter((function(t){return t.value!==e}))),o[e]=r,r):(a("can't find defaultLanguage ",e," in languages"),t)}},53:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return p}));var r=n(8),a=n(3),i=n(4),o=n(10),c=n(7),s=(n(61)("bdrc:observer"),{}),u=function(e){if(!s[e])return{};var t,n=s[e].length-1,r=-1,a=-1,c=Object(o.a)(s[e].entries());try{for(c.s();!(t=c.n()).done;){var u=Object(i.a)(t.value,2),l=u[0],p=u[1];if(p["tmp:allValuesLoaded"]?r=l:p["tmp:undone"]&&(a=l-1),-1!=r&&-1!=a)break}}catch(d){c.e(d)}finally{c.f()}return{top:n,first:r,current:a}},l=function(e,t,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(s[e])for(;s[e].length&&s[e][s[e].length-1]["tmp:undone"];)s[e].pop();else s[e]=[];var u=Object(a.a)(Object(r.a)({},t,Object(r.a)({},n,i)),e!=t?{"tmp:parentPath":p(e,t)}:{});if((1!==i.length||i[0]instanceof c.c||"tmp:uri"!==i[0].uri)&&""!==i[0].value)if(-1===o){var l=s[e].findIndex((function(e){return e["tmp:allValuesLoaded"]}));l>0?s[e].splice(l,0,u):s[e].push(u)}else s[e].push(u)};function p(e,t){var n,r=[],a=Object(o.a)(s[e]);try{for(a.s();!(n=a.n()).done;){var i,u=n.value,l=Object.keys(u).filter((function(e){return!["tmp:parent","tmp:undone"].includes(e)})),d=Object(o.a)(l);try{for(d.s();!(i=d.n()).done;){var b,j=i.value,f=Object.keys(u[j]).filter((function(e){return!["tmp:parent","tmp:undone"].includes(e)})),h=Object(o.a)(f);try{for(h.s();!(b=h.n()).done;){var O=b.value;if("string"!==typeof u[j][O]){var v,g=Object(o.a)(u[j][O]);try{for(g.s();!(v=g.n()).done;){var y=v.value;if(y instanceof c.g&&y.uri===t){if(r.length>1&&r[1]!==O)throw new Error("multiple property ("+r+","+O+") for node "+t);j!==e&&(r=p(e,j)),r.push(j),r.push(O)}}}catch(m){g.e(m)}finally{g.f()}}}}catch(m){h.e(m)}finally{h.f()}}}catch(m){d.e(m)}finally{d.f()}}}catch(m){a.e(m)}finally{a.f()}return r}},7:function(e,t,n){"use strict";n.d(t,"h",(function(){return I})),n.d(t,"j",(function(){return N})),n.d(t,"a",(function(){return q})),n.d(t,"e",(function(){return V})),n.d(t,"f",(function(){return F})),n.d(t,"b",(function(){return T})),n.d(t,"d",(function(){return C})),n.d(t,"c",(function(){return A})),n.d(t,"g",(function(){return R})),n.d(t,"i",(function(){return D})),n.d(t,"k",(function(){return Q}));var r,a,i,o,c,s=n(8),u=n(3),l=n(35),p=n(39),d=n(10),b=n(16),j=n(14),f=n(26),h=n(28),O=n(70),v=n(49),g=n(56),y=n(63),m=n(18),x=n(87),w=n(27),P=n(6),S=n(53),k=n(180),L=(n(61)("rde:rdf:types"),new h.a(O.a.defaultGraphURI)),I={},N=function(e){var t=Number(e.value);return isNaN(t)?null:+t},E=(r=Object(w.a)((function(e,t){return t+e})),a=function(){function e(t){var n=this;Object(b.a)(this,e),this.oldSubjectProps={},this.newSubjectProps={},this.subjectUri="",this.idHash=Date.now(),this.noHisto=!1,this.onGetInitialValues=function(e,t,r){e in n.oldSubjectProps||(n.oldSubjectProps[e]={}),e in n.newSubjectProps||(n.newSubjectProps[e]={}),n.oldSubjectProps[e][t]=r,n.newSubjectProps[e][t]=r},this.onUpdateValues=function(e,t,r){e in n.newSubjectProps||(n.newSubjectProps[e]={}),n.newSubjectProps[e][t]=r,!0!==n.noHisto?(Object(S.d)(n.subjectUri,e,t,r,n.noHisto),1===n.noHisto&&(n.noHisto=-1)):n.noHisto=!1},this.isInitialized=function(e,t){return e in n.oldSubjectProps&&t in n.oldSubjectProps[e]},this.propsUpdateEffect=function(e,t){return function(r){r.setSelf;(0,r.onSet)((function(r){r instanceof P.a||n.onUpdateValues(e,t,r)}))}},this.subjectUri=t}return Object(j.a)(e,[{key:"addNewValuestoStore",value:function(e,t){if(t in this.newSubjectProps){var n=new h.a(t);for(var r in this.newSubjectProps[t])if(r.startsWith("^")){var a,i=new h.a(r.substring(1)),o=this.newSubjectProps[t][r],c=Object(d.a)(o);try{for(c.s();!(a=c.n()).done;){var s,u,l=a.value;if(l instanceof A)throw"can't add literals in inverse path, something's wrong with the data!";"tmp:uri"!=(null===(s=l.node)||void 0===s?void 0:s.value)&&"tmp:none"!=(null===(u=l.node)||void 0===u?void 0:u.value)&&(e.add(l.node,i,n,L),l instanceof R&&this.addNewValuestoStore(e,l.uri))}}catch(P){c.e(P)}finally{c.f()}}else{var p,b=r.endsWith("[]"),j=new h.a(b?r.substring(0,r.length-2):r),f=this.newSubjectProps[t][r],O=new v.a,y=Object(d.a)(f);try{for(y.s();!(p=y.n()).done;){var m=p.value;if(m instanceof A){if(""==m.value)continue;b?O.append(m):e.add(n,j,m,L)}else{var x,w;if("tmp:uri"==(null===(x=m.node)||void 0===x?void 0:x.value)||"tmp:none"==(null===(w=m.node)||void 0===w?void 0:w.value))continue;if(b)if(m.node)O.append(m.node);else{if(!(m instanceof g.a))throw"could not add "+m+" to collection "+O;O.append(m)}else e.add(n,j,m.node,L);m instanceof R&&this.addNewValuestoStore(e,m.uri)}}}catch(P){y.e(P)}finally{y.f()}b&&O.elements.length&&(O.close(),e.add(n,j,O,L))}}}},{key:"getAtomForSubjectProperty",value:function(e,t){return Object(P.b)({key:this.idHash+t+e,default:[],effects_UNSTABLE:[this.propsUpdateEffect(t,e)],dangerouslyAllowMutability:!0})}},{key:"hasSubject",value:function(e){return e in this.newSubjectProps}}]),e}(),Object(f.a)(a.prototype,"getAtomForSubjectProperty",[r],Object.getOwnPropertyDescriptor(a.prototype,"getAtomForSubjectProperty"),a.prototype),a),q=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.h,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.a(),i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:x.b,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:x.a;Object(b.a)(this,e),this.onGetInitialValues=void 0,this.getAtomForSubjectProperty=void 0,this.getValues=void 0,this.topSubjectUri=void 0,this.store=void 0,this.connexGraph=void 0,this.prefixMap=void 0,this.labelProperties=void 0,this.descriptionProperties=void 0,this.store=t,this.prefixMap=r,this.descriptionProperties=o,this.labelProperties=i;var c=new E(n);this.topSubjectUri=n,this.onGetInitialValues=c.onGetInitialValues,this.getAtomForSubjectProperty=function(e,t){return c.getAtomForSubjectProperty(e,t)},this.connexGraph=a,this.getValues=function(){return c}}return Object(j.a)(e,[{key:"values",get:function(){return this.getValues()}},{key:"addNewValuestoStore",value:function(e){this.values.addNewValuestoStore(e,this.topSubjectUri)}},{key:"hasSubject",value:function(e){return!!this.values.hasSubject(e)||null!=this.store.any(new h.a(e),null,null)}},{key:"getUnitializedValues",value:function(e,t){var n=t.path;return n?this.values.isInitialized(e.uri,n.sparqlString)?null:this.getPropValuesFromStore(e,t):null}},{key:"getPropValuesFromStore",value:function(t,n){if(!n.path)throw"can't find path of "+n.uri;switch(n.objectType){case C.ResExt:if(!n.path.directPathNode)throw"can't have non-direct path for property "+n.uri;var r=t.getPropResValuesFromPath(n.path),a=e.addExtDataFromGraph(r,t.graph);return this.onGetInitialValues(t.uri,n.path.sparqlString,a),a;case C.Internal:var i=t.getPropResValuesFromPath(n.path),o=e.subjectify(i,t.graph);return this.onGetInitialValues(t.uri,n.path.sparqlString,o),o;case C.ResInList:if(!n.path.directPathNode)throw"can't have non-direct path for property "+n.uri;var c=t.getPropResValues(n.path.directPathNode),s=e.addLabelsFromGraph(c,n.graph);return this.onGetInitialValues(t.uri,n.path.sparqlString,s),s;case C.Literal:case C.LitInList:default:if(!n.path.directPathNode)throw"can't have non-direct path for property "+n.uri;var u;if(n.hasListAsObject){var l=t.getPropLitValuesFromList(n.path.directPathNode);u=null===l?[]:l}else u=t.getPropLitValues(n.path.directPathNode);var p=e.addIdToLitList(u);return this.onGetInitialValues(t.uri,n.path.sparqlString,p),p}}}]),e}();q.addIdToLitList=function(e){return e.map((function(e){return new A(e.value,e.language,e.datatype)}))},q.addLabelsFromGraph=function(e,t){return e.map((function(e){return new F(e,t)}))},q.addExtDataFromGraph=function(e,t){return e.map((function(e){if(!t.connexGraph)throw"trying to access inexistant associatedStore";var n,r={},a=Object(d.a)(t.labelProperties);try{for(a.s();!(n=a.n()).done;){var i,o=n.value,c=t.connexGraph.each(e,o,null),s=Object(d.a)(c);try{for(s.s();!(i=s.n()).done;){var u=i.value;u.language in r||(r[u.language]=u.value)}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}return new T(e.uri,r)}))},q.subjectify=function(e,t){return e.map((function(e){return new R(e,t)}))};var C,V=function(){function e(t,n){Object(b.a)(this,e),this.node=void 0,this.graph=void 0,this.isCollection=void 0,this.node=t,this.graph=n,this.isCollection=t instanceof v.a}return Object(j.a)(e,[{key:"id",get:function(){return this.node.value}},{key:"value",get:function(){return this.node.value}},{key:"lname",get:function(){return this.graph.prefixMap.lnameFromUri(this.node.value)}},{key:"namespace",get:function(){return this.graph.prefixMap.namespaceFromUri(this.node.value)}},{key:"qname",get:function(){return this.graph.prefixMap.qnameFromUri(this.node.value)}},{key:"uri",get:function(){return this.node.value}},{key:"getPropValueByLang",value:function(e){if(this.node instanceof v.a)return{};var t,n=this.graph.store.each(this.node,e,null),r={},a=Object(d.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;r[i.language]=i.value}}catch(o){a.e(o)}finally{a.f()}return r}},{key:"getPropValueOrNullByLang",value:function(e){if(this.node instanceof v.a)return{};var t,n=this.graph.store.each(this.node,e,null),r={},a=0,i=Object(d.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;a+=1,r[o.language]=o.value}}catch(c){i.e(c)}finally{i.f()}return 0==a?null:r}},{key:"getPropLitValues",value:function(e){return this.node instanceof v.a?[]:this.graph.store.each(this.node,e,null)}},{key:"getPropResValues",value:function(e){return this.node instanceof v.a?[]:this.graph.store.each(this.node,e,null)}},{key:"getPropResValuesFromList",value:function(e){if(this.node instanceof v.a)return null;var t,n=this.graph.store.each(this.node,e,null),r=Object(d.a)(n);try{for(r.s();!(t=r.n()).done;){return t.value.elements}}catch(a){r.e(a)}finally{r.f()}return null}},{key:"getPropLitValuesFromList",value:function(e){if(this.node instanceof v.a)return null;var t,n=this.graph.store.each(this.node,e,null),r=Object(d.a)(n);try{for(r.s();!(t=r.n()).done;){return t.value.elements}}catch(a){r.e(a)}finally{r.f()}return null}},{key:"getPropIntValue",value:function(e){if(this.node instanceof v.a)return null;var t=this.graph.store.any(this.node,e,null);return null===t?null:N(t)}},{key:"getPropStringValue",value:function(e){if(this.node instanceof v.a)return null;var t=this.graph.store.any(this.node,e,null);return null===t?null:t.value}},{key:"getPropResValue",value:function(e){return this.node instanceof v.a?null:this.graph.store.any(this.node,e,null)}},{key:"getPropResValuesFromPath",value:function(e){return this.node instanceof v.a?[]:e.directPathNode?this.graph.store.each(this.node,e.directPathNode,null):this.graph.store.each(null,e.inversePathNode,this.node)}},{key:"getPropResValueFromPath",value:function(e){return this.node instanceof v.a?null:e.directPathNode?this.graph.store.any(this.node,e.directPathNode,null):this.graph.store.any(this.node,e.inversePathNode,null)}},{key:"getPropBooleanValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.node instanceof v.a)return t;var n=this.graph.store.any(this.node,e,null);if(!n)return t;var r=Boolean(n.value);return r||t}}],[{key:"valuesByLang",value:function(e){var t,n={},r=Object(d.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;a instanceof A&&(n[a.language]=a.value)}}catch(i){r.e(i)}finally{r.f()}return n}}]),e}(),F=(i=Object(w.a)(),o=Object(w.a)(),c=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e,r,a){var i;return Object(b.a)(this,n),(i=t.call(this,e,r)).node=void 0,i.node=e,i}return Object(j.a)(n,[{key:"prefLabels",get:function(){var e,t=Object(d.a)(this.graph.labelProperties);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.getPropValueOrNullByLang(n);if(null!=r)return r}}catch(a){t.e(a)}finally{t.f()}return{en:this.node.uri}}},{key:"description",get:function(){var e,t=Object(d.a)(this.graph.descriptionProperties);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.getPropValueOrNullByLang(n);if(null!=r)return r}}catch(a){t.e(a)}finally{t.f()}return null}}]),n}(V),Object(f.a)(c.prototype,"prefLabels",[i],Object.getOwnPropertyDescriptor(c.prototype,"prefLabels"),c.prototype),Object(f.a)(c.prototype,"description",[o],Object.getOwnPropertyDescriptor(c.prototype,"description"),c.prototype),c),T=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(b.a)(this,n),(a=t.call(this,new h.a(e),new q(new O.a,e)))._prefLabels=void 0,a._description=void 0,a._otherData=void 0,a._prefLabels=r,a._description=o,a._otherData=i,a}return Object(j.a)(n,[{key:"prefLabels",get:function(){return this._prefLabels}},{key:"description",get:function(){return this._description}},{key:"otherData",get:function(){return this._otherData}},{key:"addOtherData",value:function(e,t){return new n(this.uri,this._prefLabels,Object(u.a)(Object(u.a)({},this._otherData),{},Object(s.a)({},e,t)))}}]),n}(F);!function(e){e[e.Literal=0]="Literal",e[e.Internal=1]="Internal",e[e.ResInList=2]="ResInList",e[e.ResExt=3]="ResExt",e[e.ResIgnore=4]="ResIgnore",e[e.LitInList=5]="LitInList"}(C||(C={}));var A=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e,r,a,i){var o;return Object(b.a)(this,n),(o=t.call(this,e,r,a)).id=void 0,o.id=i||Object(k.b)(),o}return Object(j.a)(n,[{key:"copy",value:function(){return new n(this.value,this.language,this.datatype,this.id)}},{key:"copyWithUpdatedValue",value:function(e){return new n(e,this.language,this.datatype,this.id)}},{key:"copyWithUpdatedLanguage",value:function(e){return new n(this.value,e,this.datatype,this.id)}}]),n}(g.a),R=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e,r){var a;return Object(b.a)(this,n),(a=t.call(this,e,r)).node=void 0,a.node=e,a}return Object(j.a)(n,[{key:"getUnitializedValues",value:function(e){return this.graph.getUnitializedValues(this,e)}},{key:"getAtomForProperty",value:function(e){return this.graph.getAtomForSubjectProperty(e,this.uri)}},{key:"noHisto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.graph.getValues().noHisto;(e||-1!==n)&&(!0!==t?this.graph.getValues().noHisto=t:(e||S.c[this.uri]&&S.c[this.uri].some((function(e){return e["tmp:allValuesLoaded"]})))&&(this.graph.getValues().noHisto=!0))}},{key:"resetNoHisto",value:function(){this.graph.getValues().noHisto=!1}},{key:"isEmpty",value:function(){return"tmp:uri"==this.node.uri}}],[{key:"createEmpty",value:function(){return new n(new h.a("tmp:uri"),new q(new O.a,"tmp:uri"))}}]),n}(V),D=new T("tmp:none",{en:"\u2013"},{},{en:"none provided"}),Q=(new A(""),function(e,t){return e==t})},87:function(e,t,n){"use strict";n.d(t,"f",(function(){return le})),n.d(t,"d",(function(){return pe})),n.d(t,"e",(function(){return tt})),n.d(t,"b",(function(){return it})),n.d(t,"a",(function(){return ot})),n.d(t,"c",(function(){return bt}));var r,a,i,o,c,s,u,l,p,d,b,j,f,h,O,v,g,y,m,x,w,P,S,k,L,I,N,E,q,C,V,F,T,A,R,D,Q,U,M,B,H,_,G=n(22),W=n(45),z=n(3),K=n(35),X=n(39),$=n(26),J=n(14),Y=n(16),Z=n(13),ee=n(10),te=n(28),ne=n(7),re=n(18),ae=n(27),ie=n(180),oe=n(61)("rde:rdf:shapes"),ce=(re.c("type"),re.e("property")),se=re.e("group"),ue=re.e("order"),le=re.d("label"),pe=re.f("prefLabel"),de=re.e("name"),be=re.e("path"),je=re.a("editor"),fe=re.e("node"),he=re.a("ListShape"),Oe=re.a("EnumSelectEditor"),ve=re.e("message"),ge=re.b("displayPriority"),ye=re.e("minCount"),me=re.e("minInclusive"),xe=re.e("minExclusive"),we=re.e("class"),Pe=re.e("maxCount"),Se=re.e("maxInclusive"),ke=re.e("maxExclusive"),Le=re.e("datatype"),Ie=re.a("singleLine"),Ne=re.e("targetClass"),Ee=re.e("targetObjectsOf"),qe=re.e("targetSubjectsOf"),Ce=re.b("propertyShapeType"),Ve=re.b("InternalShape"),Fe=re.b("ExternalShape"),Te=re.b("IgnoreShape"),Ae=re.b("classIn"),Re=re.e("in"),De=re.e("inversePath"),Qe=re.e("uniqueLang"),Ue=re.b("readOnly"),Me=re.b("identifierPrefix"),Be=re.b("allowMarkDown"),He=re.e("namespace"),_e=re.b("defaultLanguage"),Ge=re.b("defaultValue"),We=(re.e("languageIn"),re.e("pattern")),ze=re.b("sortOnProperty"),Ke=re.b("allowPushToTopLevelLabel"),Xe=re.b("independentIdentifiers"),$e=re.b("specialPattern"),Je=re.b("connectIDs"),Ye=re.b("allowBatchManagement"),Ze=re.b("copyObjectsOfProperty"),et=re.b("uniqueValueAmongSiblings"),tt=re.c("langString"),nt=re.f("definition"),rt=re.d("comment"),at=re.e("description"),it=[pe,le,de],ot=[nt,rt,at],ct=function(e,t,n){var r,a={},i=Object(ee.a)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,c=n.any(o,t,null);c||(a[o.uri]=0);var s=Object(ne.j)(c);a[o.uri]=null==s?0:s}}catch(u){i.e(u)}finally{i.f()}return Object(Z.a)(e).sort((function(e,t){return a[e.uri]-a[t.uri]}))},st=Object(J.a)((function e(t,n,r){Object(Y.a)(this,e),this.sparqlString=void 0,this.directPathNode=null,this.inversePathNode=null;var a=n.store.each(t,De,null);if(a.length>1)throw"too many inverse path in shacl path:"+a;if(1==a.length){var i=a[0];this.sparqlString="^"+i.value,this.inversePathNode=i}else this.sparqlString=r?t.value+"[]":t.value,this.directPathNode=t})),ut=(r=Object(ae.a)(),a=Object(ae.a)(),i=Object(ae.a)(),o=Object(ae.a)(),c=Object(ae.a)(),s=Object(ae.a)(),u=Object(ae.a)(),l=Object(ae.a)(),p=Object(ae.a)(),d=Object(ae.a)(),b=Object(ae.a)(),j=Object(ae.a)(),f=Object(ae.a)(),h=Object(ae.a)(),O=Object(ae.a)(),v=Object(ae.a)(),g=Object(ae.a)(),y=Object(ae.a)(),m=Object(ae.a)(),x=Object(ae.a)(),w=Object(ae.a)(),P=Object(ae.a)(),S=Object(ae.a)(),k=Object(ae.a)(),L=Object(ae.a)(),I=Object(ae.a)(),N=Object(ae.a)(),E=Object(ae.a)(),q=Object(ae.a)(),C=Object(ae.a)(),V=Object(ae.a)(),F=Object(ae.a)(),T=Object(ae.a)(),A=function(e){Object(K.a)(n,e);var t=Object(X.a)(n);function n(e,r){return Object(Y.a)(this,n),t.call(this,e,r,le)}return Object(J.a)(n,[{key:"prefLabels",get:function(){var e={};if(this.path&&(this.path.directPathNode||this.path.inversePathNode)){var t=this.path.directPathNode||this.path.inversePathNode;if(t)e=new ne.f(t,this.graph).prefLabels}var n=this.getPropValueByLang(de);return e=Object(z.a)(Object(z.a)({},e),n)}},{key:"helpMessage",get:function(){var e=this.description;if(null==e&&this.path&&(this.path.directPathNode||this.path.inversePathNode)){var t=this.path.directPathNode||this.path.inversePathNode;if(t)e=new ne.f(t,this.graph).description}return e}},{key:"errorMessage",get:function(){return this.getPropValueByLang(ve)}},{key:"defaultValue",get:function(){return this.graph.store.any(this.node,Ge,null)}},{key:"singleLine",get:function(){return this.getPropBooleanValue(Ie)}},{key:"connectIDs",get:function(){return this.getPropBooleanValue(Je,!1)}},{key:"displayPriority",get:function(){return this.getPropIntValue(ge)}},{key:"minCount",get:function(){return this.getPropIntValue(ye)}},{key:"maxCount",get:function(){return this.getPropIntValue(Pe)}},{key:"minInclusive",get:function(){return this.getPropIntValue(me)}},{key:"maxInclusive",get:function(){return this.getPropIntValue(Se)}},{key:"minExclusive",get:function(){return this.getPropIntValue(xe)}},{key:"maxExclusive",get:function(){return this.getPropIntValue(ke)}},{key:"allowMarkDown",get:function(){return this.getPropBooleanValue(Be)}},{key:"allowBatchManagement",get:function(){return this.getPropBooleanValue(Ye)}},{key:"uniqueValueAmongSiblings",get:function(){return this.getPropBooleanValue(et)}},{key:"uniqueLang",get:function(){return this.getPropBooleanValue(Qe)}},{key:"readOnly",get:function(){return this.getPropBooleanValue(Ue)}},{key:"defaultLanguage",get:function(){return this.getPropStringValue(_e)}},{key:"editorLname",get:function(){var e=this.getPropResValue(je);return e?re.h.lnameFromUri(e.value):null}},{key:"group",get:function(){return this.getPropResValue(se)}},{key:"copyObjectsOfProperty",get:function(){return this.graph.store.each(this.node,Ze,null)}},{key:"datatype",get:function(){var e=this.getPropResValue(Le);if(null===e&&this.hasListAsObject){var t=this.graph.store.each(this.node,ce,null);if(!t)return null;var r,a=n.resourcizeWithInit(t,this.graph),i=Object(ee.a)(a);try{for(i.s();!(r=i.n()).done;){return r.value.getPropResValue(Le)}}catch(o){i.e(o)}finally{i.f()}}return e}},{key:"pattern",get:function(){return this.getPropStringValue(We)}},{key:"sortOnProperty",get:function(){return this.getPropResValue(ze)}},{key:"allowPushToTopLevelLabel",get:function(){return this.getPropBooleanValue(Ke)}},{key:"specialPattern",get:function(){return this.getPropResValue($e)}},{key:"hasListAsObject",get:function(){var e=this.graph.store.each(this.node,fe,he);return null!=e&&0!=e.length}},{key:"in",get:function(){if(this.hasListAsObject){var e=this.graph.store.each(this.node,ce,null);if(!e)return null;var t,r=n.resourcizeWithInit(e,this.graph),a=Object(ee.a)(r);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.getPropResValue(Le)){var o=i.getPropLitValuesFromList(Re);if(o)return ne.a.addIdToLitList(o)}else{var c=i.getPropResValuesFromList(Re);if(c)return n.resourcizeWithInit(c,this.graph)}}}catch(l){a.e(l)}finally{a.f()}}if(this.datatype){var s=this.getPropLitValuesFromList(Re);if(s)return ne.a.addIdToLitList(s)}else{var u=this.getPropResValuesFromList(Re);if(u)return n.resourcizeWithInit(u,this.graph)}return null}},{key:"expectedObjectTypes",get:function(){var e=this.getPropResValuesFromList(Ae);if(!e){var t=this.getPropResValues(we);t.length&&(e=t)}return e?n.resourcizeWithInit(e,this.graph):null}},{key:"path",get:function(){var e=this.getPropResValue(be);return e?new st(e,this.graph,this.hasListAsObject):null}},{key:"objectType",get:function(){var e=this.getPropResValue(Ce);if(!e){var t=this.getPropResValue(je);return t&&t.value==Oe.value?this.datatype?ne.d.LitInList:ne.d.ResInList:ne.d.Literal}if(e.value==Ve.value)return ne.d.Internal;if(e.value==Fe.value)return ne.d.ResExt;if(e.value==Te.value)return ne.d.ResIgnore;throw"can't handle property shape type "+e.value+" for property shape "+this.qname}},{key:"targetShape",get:function(){var e,t=this.path;return t?t.directPathNode?null==(e=this.graph.store.any(null,Ee,t.directPathNode))?null:new pt(e,this.graph):t.inversePathNode?null==(e=this.graph.store.any(null,qe,t.inversePathNode))?null:new pt(e,this.graph):null:(oe("can't find path for "+this.uri),null)}}],[{key:"resourcizeWithInit",value:function(e,t){var n,r=[],a=Object(ee.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i instanceof te.a){var o=new ne.f(i,t);o.description;o.prefLabels,r.push(o)}}}catch(c){a.e(c)}finally{a.f()}return r}}]),n}(ne.f),Object($.a)(A.prototype,"prefLabels",[r],Object.getOwnPropertyDescriptor(A.prototype,"prefLabels"),A.prototype),Object($.a)(A.prototype,"helpMessage",[a],Object.getOwnPropertyDescriptor(A.prototype,"helpMessage"),A.prototype),Object($.a)(A.prototype,"errorMessage",[i],Object.getOwnPropertyDescriptor(A.prototype,"errorMessage"),A.prototype),Object($.a)(A.prototype,"defaultValue",[o],Object.getOwnPropertyDescriptor(A.prototype,"defaultValue"),A.prototype),Object($.a)(A.prototype,"singleLine",[c],Object.getOwnPropertyDescriptor(A.prototype,"singleLine"),A.prototype),Object($.a)(A.prototype,"connectIDs",[s],Object.getOwnPropertyDescriptor(A.prototype,"connectIDs"),A.prototype),Object($.a)(A.prototype,"displayPriority",[u],Object.getOwnPropertyDescriptor(A.prototype,"displayPriority"),A.prototype),Object($.a)(A.prototype,"minCount",[l],Object.getOwnPropertyDescriptor(A.prototype,"minCount"),A.prototype),Object($.a)(A.prototype,"maxCount",[p],Object.getOwnPropertyDescriptor(A.prototype,"maxCount"),A.prototype),Object($.a)(A.prototype,"minInclusive",[d],Object.getOwnPropertyDescriptor(A.prototype,"minInclusive"),A.prototype),Object($.a)(A.prototype,"maxInclusive",[b],Object.getOwnPropertyDescriptor(A.prototype,"maxInclusive"),A.prototype),Object($.a)(A.prototype,"minExclusive",[j],Object.getOwnPropertyDescriptor(A.prototype,"minExclusive"),A.prototype),Object($.a)(A.prototype,"maxExclusive",[f],Object.getOwnPropertyDescriptor(A.prototype,"maxExclusive"),A.prototype),Object($.a)(A.prototype,"allowMarkDown",[h],Object.getOwnPropertyDescriptor(A.prototype,"allowMarkDown"),A.prototype),Object($.a)(A.prototype,"allowBatchManagement",[O],Object.getOwnPropertyDescriptor(A.prototype,"allowBatchManagement"),A.prototype),Object($.a)(A.prototype,"uniqueValueAmongSiblings",[v],Object.getOwnPropertyDescriptor(A.prototype,"uniqueValueAmongSiblings"),A.prototype),Object($.a)(A.prototype,"uniqueLang",[g],Object.getOwnPropertyDescriptor(A.prototype,"uniqueLang"),A.prototype),Object($.a)(A.prototype,"readOnly",[y],Object.getOwnPropertyDescriptor(A.prototype,"readOnly"),A.prototype),Object($.a)(A.prototype,"defaultLanguage",[m],Object.getOwnPropertyDescriptor(A.prototype,"defaultLanguage"),A.prototype),Object($.a)(A.prototype,"editorLname",[x],Object.getOwnPropertyDescriptor(A.prototype,"editorLname"),A.prototype),Object($.a)(A.prototype,"group",[w],Object.getOwnPropertyDescriptor(A.prototype,"group"),A.prototype),Object($.a)(A.prototype,"copyObjectsOfProperty",[P],Object.getOwnPropertyDescriptor(A.prototype,"copyObjectsOfProperty"),A.prototype),Object($.a)(A.prototype,"datatype",[S],Object.getOwnPropertyDescriptor(A.prototype,"datatype"),A.prototype),Object($.a)(A.prototype,"pattern",[k],Object.getOwnPropertyDescriptor(A.prototype,"pattern"),A.prototype),Object($.a)(A.prototype,"sortOnProperty",[L],Object.getOwnPropertyDescriptor(A.prototype,"sortOnProperty"),A.prototype),Object($.a)(A.prototype,"allowPushToTopLevelLabel",[I],Object.getOwnPropertyDescriptor(A.prototype,"allowPushToTopLevelLabel"),A.prototype),Object($.a)(A.prototype,"specialPattern",[N],Object.getOwnPropertyDescriptor(A.prototype,"specialPattern"),A.prototype),Object($.a)(A.prototype,"hasListAsObject",[E],Object.getOwnPropertyDescriptor(A.prototype,"hasListAsObject"),A.prototype),Object($.a)(A.prototype,"in",[q],Object.getOwnPropertyDescriptor(A.prototype,"in"),A.prototype),Object($.a)(A.prototype,"expectedObjectTypes",[C],Object.getOwnPropertyDescriptor(A.prototype,"expectedObjectTypes"),A.prototype),Object($.a)(A.prototype,"path",[V],Object.getOwnPropertyDescriptor(A.prototype,"path"),A.prototype),Object($.a)(A.prototype,"objectType",[F],Object.getOwnPropertyDescriptor(A.prototype,"objectType"),A.prototype),Object($.a)(A.prototype,"targetShape",[T],Object.getOwnPropertyDescriptor(A.prototype,"targetShape"),A.prototype),A),lt=(R=Object(ae.a)(),D=Object(ae.a)(),Q=function(e){Object(K.a)(n,e);var t=Object(X.a)(n);function n(e,r){return Object(Y.a)(this,n),t.call(this,e,r,le)}return Object(J.a)(n,[{key:"properties",get:function(){var e=[],t=this.graph.store.each(null,se,this.node);t=ct(t,ue,this.graph.store);var n,r=Object(ee.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.push(new ut(a,this.graph))}}catch(i){r.e(i)}finally{r.f()}return e}},{key:"prefLabels",get:function(){return this.getPropValueByLang(le)}}]),n}(ne.f),Object($.a)(Q.prototype,"properties",[R],Object.getOwnPropertyDescriptor(Q.prototype,"properties"),Q.prototype),Object($.a)(Q.prototype,"prefLabels",[D],Object.getOwnPropertyDescriptor(Q.prototype,"prefLabels"),Q.prototype),Q),pt=(U=Object(ae.a)(),M=Object(ae.a)(),B=Object(ae.a)(),H=Object(ae.a)(),_=function(e){Object(K.a)(n,e);var t=Object(X.a)(n);function n(e,r){return Object(Y.a)(this,n),t.call(this,e,r,le)}return Object(J.a)(n,[{key:"targetClassPrefLabels",get:function(){var e=this.graph.store.any(this.node,Ne,null);return null==e?null:new ne.f(e,this.graph).prefLabels}},{key:"properties",get:function(){var e=[],t=this.graph.store.each(this.node,ce,null);t=ct(t,ue,this.graph.store);var n,r=Object(ee.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.push(new ut(a,this.graph))}}catch(i){r.e(i)}finally{r.f()}return e}},{key:"independentIdentifiers",get:function(){return this.getPropBooleanValue(Xe,!1)}},{key:"groups",get:function(){var e,t=this,n=[],r=this.graph.store.each(this.node,ce,null),a=[],i=Object(ee.a)(r);try{var o=function(){var n=e.value,r=t.graph.store.any(n,se,null);r&&!a.some((function(e){return e.value===r.value}))&&a.push(r)};for(i.s();!(e=i.n()).done;)o()}catch(l){i.e(l)}finally{i.f()}a=ct(a,ue,this.graph.store);var c,s=Object(ee.a)(a);try{for(s.s();!(c=s.n()).done;){var u=c.value;n.push(new lt(u,this.graph))}}catch(l){s.e(l)}finally{s.f()}return n}}]),n}(ne.f),Object($.a)(_.prototype,"targetClassPrefLabels",[U],Object.getOwnPropertyDescriptor(_.prototype,"targetClassPrefLabels"),_.prototype),Object($.a)(_.prototype,"properties",[M],Object.getOwnPropertyDescriptor(_.prototype,"properties"),_.prototype),Object($.a)(_.prototype,"independentIdentifiers",[B],Object.getOwnPropertyDescriptor(_.prototype,"independentIdentifiers"),_.prototype),Object($.a)(_.prototype,"groups",[H],Object.getOwnPropertyDescriptor(_.prototype,"groups"),_.prototype),_),dt=Object(ie.a)("ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",8),bt=function(){var e=Object(W.a)(Object(G.a)().mark((function e(t,n){var r,a,i,o;return Object(G.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=t.getPropStringValue(Me))){e.next=3;break}throw"cannot find entity prefix for "+t.qname;case 3:for(null==(a=t.getPropStringValue(He))&&(a=n.namespace),i=a+r+n.lname+dt();n.graph.hasSubject(i);)i=a+r+dt();return o=new ne.g(new te.a(i),n.graph),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},[[361,1,2]]]);
//# sourceMappingURL=main.f213f9a0.chunk.js.map